(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Fn=!1;var tr=Array.isArray,Os=Array.prototype.indexOf,bn=Array.from,Ir=Object.defineProperty,Mt=Object.getOwnPropertyDescriptor,$r=Object.getOwnPropertyDescriptors,Ns=Object.prototype,Fs=Array.prototype,nr=Object.getPrototypeOf,pr=Object.isExtensible;const ze=()=>{};function zs(e){return e()}function fn(e){for(var t=0;t<e.length;t++)e[t]()}function Dr(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}const te=2,rr=4,wn=8,Bs=1<<24,Ye=16,je=32,_t=64,yn=128,Ee=512,Z=1024,ue=2048,Me=4096,pe=8192,Be=16384,sr=32768,vt=65536,gr=1<<17,Pr=1<<18,It=1<<19,Lr=1<<20,Fe=1<<25,ht=32768,zn=1<<21,ir=1<<22,et=1<<23,Ge=Symbol("$state"),Gs=Symbol("legacy props"),Us=Symbol(""),xt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Rr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function qs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ys(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function js(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ws(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Hs(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Vs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ks(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Js(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Zs(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Qs=1,ei=2,Or=4,ti=8,ni=16,ri=1,si=2,ii=4,ai=8,oi=16,li=1,ci=2,re=Symbol(),ui="http://www.w3.org/1999/xhtml";function fi(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function di(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Nr(e){return e===this.v}function Fr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function zr(e){return!Fr(e,this.v)}let $t=!1,vi=!1;function hi(){$t=!0}let j=null;function Ct(e){j=e}function st(e,t=!1,n){j={p:j,i:!1,c:null,e:null,s:e,x:null,l:$t&&!t?{s:null,u:null,$:[]}:null}}function it(e){var t=j,n=t.e;if(n!==null){t.e=null;for(var r of n)ts(r)}return t.i=!0,j=t.p,{}}function Zt(){return!$t||j!==null&&j.l===null}let ot=[];function Br(){var e=ot;ot=[],fn(e)}function Dt(e){if(ot.length===0&&!qt){var t=ot;queueMicrotask(()=>{t===ot&&Br()})}ot.push(e)}function pi(){for(;ot.length>0;)Br()}function Gr(e){var t=U;if(t===null)return N.f|=et,e;if((t.f&sr)===0){if((t.f&yn)===0)throw e;t.b.error(e)}else Tt(e,t)}function Tt(e,t){for(;t!==null;){if((t.f&yn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const sn=new Set;let F=null,Ut=null,be=null,me=[],Sn=null,Bn=!1,qt=!1;class Te{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#i=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){me=[],Ut=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#a(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(Ut=this,F=null,mr(n.render_effects),mr(n.effects),Ut=null,this.#l?.resolve()),be=null}#a(t,n){t.f^=Z;for(var r=t.first;r!==null;){var i=r.f,s=(i&(je|_t))!==0,a=s&&(i&Z)!==0,l=a||(i&pe)!==0||this.skipped_effects.has(r);if((r.f&yn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=Z:(i&rr)!==0?n.effects.push(r):Pt(r)&&((r.f&Ye)!==0&&this.#i.add(r),kt(r));var o=r.first;if(o!==null){r=o;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=c.next,c=c.parent}}#o(t){for(const n of t)(n.f&ue)!==0?this.#i.add(n):(n.f&Me)!==0&&this.#s.add(n),this.#c(n.deps),ee(n,Z)}#c(t){if(t!==null)for(const n of t)(n.f&te)===0||(n.f&ht)===0||(n.f^=ht,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&et)===0&&(this.current.set(t,t.v),be?.set(t,t.v))}activate(){F=this,this.apply()}deactivate(){F===this&&(F=null,be=null)}flush(){if(this.activate(),me.length>0){if(Ur(),F!==null&&F!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(sn.size>1){this.previous.clear();var t=be,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const s of sn){if(s===this){n=!1;continue}const a=[];for(const[o,c]of this.current){if(s.current.has(o))if(n&&c!==s.current.get(o))s.current.set(o,c);else continue;a.push(o)}if(a.length===0)continue;const l=[...s.current.keys()].filter(o=>!this.current.has(o));if(l.length>0){var i=me;me=[];const o=new Set,c=new Map;for(const u of a)qr(u,l,o,c);if(me.length>0){F=s,s.apply();for(const u of me)s.#a(u,r);s.deactivate()}me=i}}F=null,be=t}this.committed=!0,sn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#i)this.#s.delete(t),ee(t,ue),pt(t);for(const t of this.#s)ee(t,Me),pt(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Dr()).promise}static ensure(){if(F===null){const t=F=new Te;sn.add(F),qt||Te.enqueue(()=>{F===t&&t.flush()})}return F}static enqueue(t){Dt(t)}apply(){}}function gi(e){var t=qt;qt=!0;try{for(var n;;){if(pi(),me.length===0&&(F?.flush(),me.length===0))return Sn=null,n;Ur()}}finally{qt=t}}function Ur(){var e=ct;Bn=!0;var t=null;try{var n=0;for(vn(!0);me.length>0;){var r=Te.ensure();if(n++>1e3){var i,s;mi()}r.process(me),tt.clear()}}finally{Bn=!1,vn(e),Sn=null}}function mi(){try{Ws()}catch(e){Tt(e,Sn)}}let Oe=null;function mr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Be|pe))===0&&Pt(r)&&(Oe=new Set,kt(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?as(r):r.fn=null),Oe?.size>0)){tt.clear();for(const i of Oe){if((i.f&(Be|pe))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)Oe.has(a)&&(Oe.delete(a),s.push(a)),a=a.parent;for(let l=s.length-1;l>=0;l--){const o=s[l];(o.f&(Be|pe))===0&&kt(o)}}Oe.clear()}}Oe=null}}function qr(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const s=i.f;(s&te)!==0?qr(i,t,n,r):(s&(ir|Ye))!==0&&(s&ue)===0&&Yr(i,t,r)&&(ee(i,ue),pt(i))}}function Yr(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(t.includes(i))return!0;if((i.f&te)!==0&&Yr(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function pt(e){for(var t=Sn=e;t.parent!==null;){t=t.parent;var n=t.f;if(Bn&&t===U&&(n&Ye)!==0&&(n&Pr)===0)return;if((n&(_t|je))!==0){if((n&Z)===0)return;t.f^=Z}}me.push(t)}function _i(e){let t=0,n=gt(0),r;return()=>{Wt()&&(d(n),en(()=>(t===0&&(r=$(()=>e(()=>Yt(n)))),t+=1,()=>{Dt(()=>{t-=1,t===0&&(r?.(),r=void 0,Yt(n))})})))}}var bi=vt|It|yn;function wi(e,t,n){new yi(e,t,n)}class yi{parent;#e=!1;#t;#r=null;#n;#l;#i;#s=null;#a=null;#o=null;#c=null;#u=null;#f=0;#d=0;#h=!1;#v=null;#b=_i(()=>(this.#v=gt(this.#f),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=U.b,this.#e=!!this.#n.pending,this.#i=Tn(()=>{U.b=this;{var i=this.#m();try{this.#s=_e(()=>r(i))}catch(s){this.error(s)}this.#d>0?this.#g():this.#e=!1}return()=>{this.#u?.remove()}},bi)}#w(){try{this.#s=_e(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#n.pending;t&&(this.#a=_e(()=>t(this.#t)),Te.enqueue(()=>{var n=this.#m();this.#s=this.#p(()=>(Te.ensure(),_e(()=>this.#l(n)))),this.#d>0?this.#g():(lt(this.#a,()=>{this.#a=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#u=nt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=U,r=N,i=j;Ae(this.#i),le(this.#i),Ct(this.#i.ctx);try{return t()}catch(s){return Gr(s),null}finally{Ae(n),le(r),Ct(i)}}#g(){const t=this.#n.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),cs(this.#s,this.#c)),this.#a===null&&(this.#a=_e(()=>t(this.#t)))}#_(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#a&&lt(this.#a,()=>{this.#a=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#_(t),this.#f+=t,this.#v&&mt(this.#v,this.#f)}get_effect_pending(){return this.#b(),d(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#h||!n&&!r)throw t;this.#s&&(ce(this.#s),this.#s=null),this.#a&&(ce(this.#a),this.#a=null),this.#o&&(ce(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){di();return}i=!0,s&&Zs(),Te.ensure(),this.#f=0,this.#o!==null&&lt(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,_e(()=>this.#l(this.#t)))),this.#d>0?this.#g():this.#e=!1};var l=N;try{le(null),s=!0,n?.(t,a),s=!1}catch(o){Tt(o,this.#i&&this.#i.parent)}finally{le(l)}r&&Dt(()=>{this.#o=this.#p(()=>{Te.ensure(),this.#h=!0;try{return _e(()=>{r(this.#t,()=>t,()=>a)})}catch(o){return Tt(o,this.#i.parent),null}finally{this.#h=!1}})})}}function Si(e,t,n,r){const i=Zt()?xn:ar;if(n.length===0&&e.length===0){r(t.map(i));return}var s=F,a=U,l=xi();function o(){Promise.all(n.map(c=>Ei(c))).then(c=>{l();try{r([...t.map(i),...c])}catch(u){(a.f&Be)===0&&Tt(u,a)}s?.deactivate(),dn()}).catch(c=>{Tt(c,a)})}e.length>0?Promise.all(e).then(()=>{l();try{return o()}finally{s?.deactivate(),dn()}}):o()}function xi(){var e=U,t=N,n=j,r=F;return function(s=!0){Ae(e),le(t),Ct(n),s&&r?.activate()}}function dn(){Ae(null),le(null),Ct(null)}function xn(e){var t=te|ue,n=N!==null&&(N.f&te)!==0?N:null;return U!==null&&(U.f|=It),{ctx:j,deps:null,effects:null,equals:Nr,f:t,fn:e,reactions:null,rv:0,v:re,wv:0,parent:n??U,ac:null}}function Ei(e,t){let n=U;n===null&&qs();var r=n.b,i=void 0,s=gt(re),a=!N,l=new Map;return Li(()=>{var o=Dr();i=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{c===F&&c.committed&&c.deactivate(),dn()})}catch(v){o.reject(v),dn()}var c=F;if(a){var u=!r.is_pending();r.update_pending_count(1),c.increment(u),l.get(c)?.reject(xt),l.delete(c),l.set(c,o)}const f=(v,h=void 0)=>{if(c.activate(),h)h!==xt&&(s.f|=et,mt(s,h));else{(s.f&et)!==0&&(s.f^=et),mt(s,v);for(const[g,w]of l){if(l.delete(g),g===c)break;w.reject(xt)}}a&&(r.update_pending_count(-1),c.decrement(u))};o.promise.then(f,v=>f(null,v||"unknown"))}),Mn(()=>{for(const o of l.values())o.reject(xt)}),new Promise(o=>{function c(u){function f(){u===i?o(s):c(i)}u.then(f,f)}c(i)})}function ar(e){const t=xn(e);return t.equals=zr,t}function jr(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)ce(t[n])}}function Mi(e){for(var t=e.parent;t!==null;){if((t.f&te)===0)return(t.f&Be)===0?t:null;t=t.parent}return null}function or(e){var t,n=U;Ae(Mi(e));try{e.f&=~ht,jr(e),t=vs(e)}finally{Ae(n)}return t}function Xr(e){var t=or(e);if(e.equals(t)||(F?.is_fork||(e.v=t),e.wv=fs()),!bt)if(be!==null)(Wt()||F?.is_fork)&&be.set(e,t);else{var n=(e.f&Ee)===0?Me:Z;ee(e,n)}}let Gn=new Set;const tt=new Map;let Wr=!1;function gt(e,t){var n={f:0,v:e,reactions:null,equals:Nr,rv:0,wv:0};return n}function Le(e,t){const n=gt(e);return Fi(n),n}function H(e,t=!1,n=!0){const r=gt(e);return t||(r.equals=zr),$t&&n&&j!==null&&j.l!==null&&(j.l.s??=[]).push(r),r}function Re(e,t){return z(e,$(()=>d(e))),t}function z(e,t,n=!1){N!==null&&(!ke||(N.f&gr)!==0)&&Zt()&&(N.f&(te|Ye|ir|gr))!==0&&!Ue?.includes(e)&&Js();let r=n?Et(t):t;return mt(e,r)}function mt(e,t){if(!e.equals(t)){var n=e.v;bt?tt.set(e,t):tt.set(e,n),e.v=t;var r=Te.ensure();r.capture(e,n),(e.f&te)!==0&&((e.f&ue)!==0&&or(e),ee(e,(e.f&Ee)!==0?Z:Me)),e.wv=fs(),Hr(e,ue),Zt()&&U!==null&&(U.f&Z)!==0&&(U.f&(je|_t))===0&&(ge===null?zi([e]):ge.push(e)),!r.is_fork&&Gn.size>0&&!Wr&&Ci()}return t}function Ci(){Wr=!1;var e=ct;vn(!0);const t=Array.from(Gn);try{for(const n of t)(n.f&Z)!==0&&ee(n,Me),Pt(n)&&kt(n)}finally{vn(e)}Gn.clear()}function Yt(e){z(e,e.v+1)}function Hr(e,t){var n=e.reactions;if(n!==null)for(var r=Zt(),i=n.length,s=0;s<i;s++){var a=n[s],l=a.f;if(!(!r&&a===U)){var o=(l&ue)===0;if(o&&ee(a,t),(l&te)!==0){var c=a;be?.delete(c),(l&ht)===0&&(l&Ee&&(a.f|=ht),Hr(c,Me))}else o&&((l&Ye)!==0&&Oe!==null&&Oe.add(a),pt(a))}}}function Et(e){if(typeof e!="object"||e===null||Ge in e)return e;const t=nr(e);if(t!==Ns&&t!==Fs)return e;var n=new Map,r=tr(e),i=Le(0),s=ut,a=l=>{if(ut===s)return l();var o=N,c=ut;le(null),Sr(s);var u=l();return le(o),Sr(c),u};return r&&n.set("length",Le(e.length)),new Proxy(e,{defineProperty(l,o,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Vs();var u=n.get(o);return u===void 0?u=a(()=>{var f=Le(c.value);return n.set(o,f),f}):z(u,c.value,!0),!0},deleteProperty(l,o){var c=n.get(o);if(c===void 0){if(o in l){const u=a(()=>Le(re));n.set(o,u),Yt(i)}}else z(c,re),Yt(i);return!0},get(l,o,c){if(o===Ge)return e;var u=n.get(o),f=o in l;if(u===void 0&&(!f||Mt(l,o)?.writable)&&(u=a(()=>{var h=Et(f?l[o]:re),g=Le(h);return g}),n.set(o,u)),u!==void 0){var v=d(u);return v===re?void 0:v}return Reflect.get(l,o,c)},getOwnPropertyDescriptor(l,o){var c=Reflect.getOwnPropertyDescriptor(l,o);if(c&&"value"in c){var u=n.get(o);u&&(c.value=d(u))}else if(c===void 0){var f=n.get(o),v=f?.v;if(f!==void 0&&v!==re)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(l,o){if(o===Ge)return!0;var c=n.get(o),u=c!==void 0&&c.v!==re||Reflect.has(l,o);if(c!==void 0||U!==null&&(!u||Mt(l,o)?.writable)){c===void 0&&(c=a(()=>{var v=u?Et(l[o]):re,h=Le(v);return h}),n.set(o,c));var f=d(c);if(f===re)return!1}return u},set(l,o,c,u){var f=n.get(o),v=o in l;if(r&&o==="length")for(var h=c;h<f.v;h+=1){var g=n.get(h+"");g!==void 0?z(g,re):h in l&&(g=a(()=>Le(re)),n.set(h+"",g))}if(f===void 0)(!v||Mt(l,o)?.writable)&&(f=a(()=>Le(void 0)),z(f,Et(c)),n.set(o,f));else{v=f.v!==re;var w=a(()=>Et(c));z(f,w)}var p=Reflect.getOwnPropertyDescriptor(l,o);if(p?.set&&p.set.call(u,c),!v){if(r&&typeof o=="string"){var y=n.get("length"),R=Number(o);Number.isInteger(R)&&R>=y.v&&z(y,R+1)}Yt(i)}return!0},ownKeys(l){d(i);var o=Reflect.ownKeys(l).filter(f=>{var v=n.get(f);return v===void 0||v.v!==re});for(var[c,u]of n)u.v!==re&&!(c in l)&&o.push(c);return o},setPrototypeOf(){Ks()}})}function _r(e){try{if(e!==null&&typeof e=="object"&&Ge in e)return e[Ge]}catch{}return e}function Ti(e,t){return Object.is(_r(e),_r(t))}var br,Vr,Kr,Jr;function ki(){if(br===void 0){br=window,Vr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Kr=Mt(t,"firstChild").get,Jr=Mt(t,"nextSibling").get,pr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),pr(n)&&(n.__t=void 0)}}function nt(e=""){return document.createTextNode(e)}function Ze(e){return Kr.call(e)}function Qt(e){return Jr.call(e)}function m(e,t){return Ze(e)}function rt(e,t=!1){{var n=Ze(e);return n instanceof Comment&&n.data===""?Qt(n):n}}function b(e,t=1,n=!1){let r=e;for(;t--;)r=Qt(r);return r}function Ai(e){e.textContent=""}function Zr(){return!1}let wr=!1;function Ii(){wr||(wr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function En(e){var t=N,n=U;le(null),Ae(null);try{return e()}finally{le(t),Ae(n)}}function Qr(e,t,n,r=n){e.addEventListener(t,()=>En(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),Ii()}function es(e){U===null&&(N===null&&Xs(),js()),bt&&Ys()}function $i(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ie(e,t,n){var r=U;r!==null&&(r.f&pe)!==0&&(e|=pe);var i={ctx:j,deps:null,nodes:null,f:e|ue|Ee,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{kt(i),i.f|=sr}catch(l){throw ce(i),l}else t!==null&&pt(i);var s=i;if(n&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&It)===0&&(s=s.first,(e&Ye)!==0&&(e&vt)!==0&&s!==null&&(s.f|=vt)),s!==null&&(s.parent=r,r!==null&&$i(s,r),N!==null&&(N.f&te)!==0&&(e&_t)===0)){var a=N;(a.effects??=[]).push(s)}return i}function Wt(){return N!==null&&!ke}function Mn(e){const t=Ie(wn,null,!1);return ee(t,Z),t.teardown=e,t}function Un(e){es();var t=U.f,n=!N&&(t&je)!==0&&(t&sr)===0;if(n){var r=j;(r.e??=[]).push(e)}else return ts(e)}function ts(e){return Ie(rr|Lr,e,!1)}function Di(e){return es(),Ie(wn|Lr,e,!0)}function Pi(e){Te.ensure();const t=Ie(_t|It,e,!0);return(n={})=>new Promise(r=>{n.outro?lt(t,()=>{ce(t),r(void 0)}):(ce(t),r(void 0))})}function ns(e){return Ie(rr,e,!1)}function Ne(e,t){var n=j,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=en(()=>{e(),!r.ran&&(r.ran=!0,$(t))})}function Cn(){var e=j;en(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&Z)!==0&&ee(n,Me),Pt(n)&&kt(n),t.ran=!1}})}function Li(e){return Ie(ir|It,e,!0)}function en(e,t=0){return Ie(wn|t,e,!0)}function W(e,t=[],n=[],r=[]){Si(r,t,n,i=>{Ie(wn,()=>e(...i.map(d)),!0)})}function Tn(e,t=0){var n=Ie(Ye|t,e,!0);return n}function _e(e){return Ie(je|It,e,!0)}function rs(e){var t=e.teardown;if(t!==null){const n=bt,r=N;yr(!0),le(null);try{t.call(null)}finally{yr(n),le(r)}}}function ss(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&En(()=>{i.abort(xt)});var r=n.next;(n.f&_t)!==0?n.parent=null:ce(n,t),n=r}}function Ri(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&je)===0&&ce(t),t=n}}function ce(e,t=!0){var n=!1;(t||(e.f&Pr)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(is(e.nodes.start,e.nodes.end),n=!0),ss(e,t&&!n),hn(e,0),ee(e,Be);var r=e.nodes&&e.nodes.t;if(r!==null)for(const s of r)s.stop();rs(e);var i=e.parent;i!==null&&i.first!==null&&as(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function is(e,t){for(;e!==null;){var n=e===t?null:Qt(e);e.remove(),e=n}}function as(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function lt(e,t,n=!0){var r=[];os(e,r,!0);var i=()=>{n&&ce(e),t&&t()},s=r.length;if(s>0){var a=()=>--s||i();for(var l of r)l.out(a)}else i()}function os(e,t,n){if((e.f&pe)===0){e.f^=pe;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||n)&&t.push(l);for(var i=e.first;i!==null;){var s=i.next,a=(i.f&vt)!==0||(i.f&je)!==0&&(e.f&Ye)!==0;os(i,t,a?n:!1),i=s}}}function lr(e){ls(e,!0)}function ls(e,t){if((e.f&pe)!==0){e.f^=pe,(e.f&Z)===0&&(ee(e,ue),pt(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&vt)!==0||(n.f&je)!==0;ls(n,i?t:!1),n=r}var s=e.nodes&&e.nodes.t;if(s!==null)for(const a of s)(a.is_global||t)&&a.in()}}function cs(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var i=n===r?null:Qt(n);t.append(n),n=i}}let St=null;function Oi(e){var t=St;try{if(St=new Set,$(e),t!==null)for(var n of St)t.add(n);return St}finally{St=t}}function Ni(e){for(var t of Oi(e))mt(t,t.v)}let ct=!1;function vn(e){ct=e}let bt=!1;function yr(e){bt=e}let N=null,ke=!1;function le(e){N=e}let U=null;function Ae(e){U=e}let Ue=null;function Fi(e){N!==null&&(Ue===null?Ue=[e]:Ue.push(e))}let se=null,he=0,ge=null;function zi(e){ge=e}let us=1,Ht=0,ut=Ht;function Sr(e){ut=e}function fs(){return++us}function Pt(e){var t=e.f;if((t&ue)!==0)return!0;if(t&te&&(e.f&=~ht),(t&Me)!==0){var n=e.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(Pt(s)&&Xr(s),s.wv>e.wv)return!0}(t&Ee)!==0&&be===null&&ee(e,Z)}return!1}function ds(e,t,n=!0){var r=e.reactions;if(r!==null&&!Ue?.includes(e))for(var i=0;i<r.length;i++){var s=r[i];(s.f&te)!==0?ds(s,t,!1):t===s&&(n?ee(s,ue):(s.f&Z)!==0&&ee(s,Me),pt(s))}}function vs(e){var t=se,n=he,r=ge,i=N,s=Ue,a=j,l=ke,o=ut,c=e.f;se=null,he=0,ge=null,N=(c&(je|_t))===0?e:null,Ue=null,Ct(e.ctx),ke=!1,ut=++Ht,e.ac!==null&&(En(()=>{e.ac.abort(xt)}),e.ac=null);try{e.f|=zn;var u=e.fn,f=u(),v=e.deps;if(se!==null){var h;if(hn(e,he),v!==null&&he>0)for(v.length=he+se.length,h=0;h<se.length;h++)v[he+h]=se[h];else e.deps=v=se;if(Wt()&&(e.f&Ee)!==0)for(h=he;h<v.length;h++)(v[h].reactions??=[]).push(e)}else v!==null&&he<v.length&&(hn(e,he),v.length=he);if(Zt()&&ge!==null&&!ke&&v!==null&&(e.f&(te|Me|ue))===0)for(h=0;h<ge.length;h++)ds(ge[h],e);return i!==null&&i!==e&&(Ht++,ge!==null&&(r===null?r=ge:r.push(...ge))),(e.f&et)!==0&&(e.f^=et),f}catch(g){return Gr(g)}finally{e.f^=zn,se=t,he=n,ge=r,N=i,Ue=s,Ct(a),ke=l,ut=o}}function Bi(e,t){let n=t.reactions;if(n!==null){var r=Os.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&te)!==0&&(se===null||!se.includes(t))&&(ee(t,Me),(t.f&Ee)!==0&&(t.f^=Ee,t.f&=~ht),jr(t),hn(t,0))}function hn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Bi(e,n[r])}function kt(e){var t=e.f;if((t&Be)===0){ee(e,Z);var n=U,r=ct;U=e,ct=!0;try{(t&(Ye|Bs))!==0?Ri(e):ss(e),rs(e);var i=vs(e);e.teardown=typeof i=="function"?i:null,e.wv=us;var s;Fn&&vi&&(e.f&ue)!==0&&e.deps}finally{ct=r,U=n}}}async function Gi(){await Promise.resolve(),gi()}function d(e){var t=e.f,n=(t&te)!==0;if(St?.add(e),N!==null&&!ke){var r=U!==null&&(U.f&Be)!==0;if(!r&&!Ue?.includes(e)){var i=N.deps;if((N.f&zn)!==0)e.rv<Ht&&(e.rv=Ht,se===null&&i!==null&&i[he]===e?he++:se===null?se=[e]:se.includes(e)||se.push(e));else{(N.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[N]:s.includes(N)||s.push(N)}}}if(bt){if(tt.has(e))return tt.get(e);if(n){var a=e,l=a.v;return((a.f&Z)===0&&a.reactions!==null||ps(a))&&(l=or(a)),tt.set(a,l),l}}else n&&(!be?.has(e)||F?.is_fork&&!Wt())&&(a=e,Pt(a)&&Xr(a),ct&&Wt()&&(a.f&Ee)===0&&hs(a));if(be?.has(e))return be.get(e);if((e.f&et)!==0)throw e.v;return e.v}function hs(e){if(e.deps!==null){e.f^=Ee;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&te)!==0&&(t.f&Ee)===0&&hs(t)}}function ps(e){if(e.v===re)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(tt.has(t)||(t.f&te)!==0&&ps(t))return!0;return!1}function $(e){var t=ke;try{return ke=!0,e()}finally{ke=t}}const Ui=-7169;function ee(e,t){e.f=e.f&Ui|t}function qi(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ge in e)qn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Ge in n&&qn(n)}}}function qn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{qn(e[r],t)}catch{}const n=nr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=$r(n);for(let i in r){const s=r[i].get;if(s)try{s.call(e)}catch{}}}}}const Yi=["touchstart","touchmove"];function ji(e){return Yi.includes(e)}const gs=new Set,Yn=new Set;function Xi(e,t,n,r={}){function i(s){if(r.capture||Bt.call(t,s),!s.cancelBubble)return En(()=>n?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Dt(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Wi(e,t,n,r,i){var s={capture:r,passive:i},a=Xi(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Mn(()=>{t.removeEventListener(e,a,s)})}function tn(e){for(var t=0;t<e.length;t++)gs.add(e[t]);for(var n of Yn)n(e)}let xr=null;function Bt(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],s=i[0]||e.target;xr=e;var a=0,l=xr===e&&e.__root;if(l){var o=i.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;o<=c&&(a=o)}if(s=i[a]||e.target,s!==t){Ir(e,"currentTarget",{configurable:!0,get(){return s||n}});var u=N,f=U;le(null),Ae(null);try{for(var v,h=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var w=s["__"+r];w!=null&&(!s.disabled||e.target===s)&&w.call(s,e)}catch(p){v?h.push(p):v=p}if(e.cancelBubble||g===t||g===null)break;s=g}if(v){for(let p of h)queueMicrotask(()=>{throw p});throw v}}finally{e.__root=t,delete e.currentTarget,le(u),Ae(f)}}}function ms(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function pn(e,t){var n=U;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function D(e,t){var n=(t&li)!==0,r=(t&ci)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=ms(s?e:"<!>"+e),n||(i=Ze(i)));var a=r||Vr?document.importNode(i,!0):i.cloneNode(!0);if(n){var l=Ze(a),o=a.lastChild;pn(l,o)}else pn(a,a);return a}}function jn(){var e=document.createDocumentFragment(),t=document.createComment(""),n=nt();return e.append(t,n),pn(t,n),e}function k(e,t){e!==null&&e.before(t)}function Y(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Hi(e,t){return Vi(e,t)}const wt=new Map;function Vi(e,{target:t,anchor:n,props:r={},events:i,context:s,intro:a=!0}){ki();var l=new Set,o=f=>{for(var v=0;v<f.length;v++){var h=f[v];if(!l.has(h)){l.add(h);var g=ji(h);t.addEventListener(h,Bt,{passive:g});var w=wt.get(h);w===void 0?(document.addEventListener(h,Bt,{passive:g}),wt.set(h,1)):wt.set(h,w+1)}}};o(bn(gs)),Yn.add(o);var c=void 0,u=Pi(()=>{var f=n??t.appendChild(nt());return wi(f,{pending:()=>{}},v=>{if(s){st({});var h=j;h.c=s}i&&(r.$$events=i),c=e(v,r)||{},s&&it()}),()=>{for(var v of l){t.removeEventListener(v,Bt);var h=wt.get(v);--h===0?(document.removeEventListener(v,Bt),wt.delete(v)):wt.set(v,h)}Yn.delete(o),f!==n&&f.parentNode?.removeChild(f)}});return Ki.set(c,u),c}let Ki=new WeakMap;class _s{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#i=()=>{var t=F;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)lr(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#t.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#e){if(this.#e.delete(s),s===t)break;const l=this.#r.get(a);l&&(ce(l.effect),this.#r.delete(a))}for(const[s,a]of this.#t){if(s===n||this.#n.has(s))continue;const l=()=>{if(Array.from(this.#e.values()).includes(s)){var c=document.createDocumentFragment();cs(a,c),c.append(nt()),this.#r.set(s,{effect:a,fragment:c})}else ce(a);this.#n.delete(s),this.#t.delete(s)};this.#l||!r?(this.#n.add(s),lt(a,l,!1)):l()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,i]of this.#r)n.includes(r)||(ce(i.effect),this.#r.delete(r))};ensure(t,n){var r=F,i=Zr();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(i){var s=document.createDocumentFragment(),a=nt();s.append(a),this.#r.set(t,{effect:_e(()=>n(a)),fragment:s})}else this.#t.set(t,_e(()=>n(this.anchor)));if(this.#e.set(r,t),i){for(const[l,o]of this.#t)l===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[l,o]of this.#r)l===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#i),r.ondiscard(this.#s)}else this.#i()}}function ie(e,t,n=!1){var r=new _s(e),i=n?vt:0;function s(a,l){r.ensure(a,l)}Tn(()=>{var a=!1;t((l,o=!0)=>{a=!0,s(o,l)}),a||s(!1,null)},i)}function gn(e,t){return t}function Ji(e,t,n){for(var r=[],i=t.length,s,a=t.length,l=0;l<i;l++){let f=t[l];lt(f,()=>{if(s){if(s.pending.delete(f),s.done.add(f),s.pending.size===0){var v=e.outrogroups;Xn(bn(s.done)),v.delete(s),v.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var o=r.length===0&&n!==null;if(o){var c=n,u=c.parentNode;Ai(u),u.append(c),e.items.clear()}Xn(t,!o)}else s={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(s)}function Xn(e,t=!0){for(var n=0;n<e.length;n++)ce(e[n],t)}var Er;function Vt(e,t,n,r,i,s=null){var a=e,l=new Map,o=(t&Or)!==0;if(o){var c=e;a=c.appendChild(nt())}var u=null,f=ar(()=>{var y=n();return tr(y)?y:y==null?[]:bn(y)}),v,h=!0;function g(){p.fallback=u,Zi(p,v,a,t,r),u!==null&&(v.length===0?(u.f&Fe)===0?lr(u):(u.f^=Fe,Gt(u,null,a)):lt(u,()=>{u=null}))}var w=Tn(()=>{v=d(f);for(var y=v.length,R=new Set,C=F,x=Zr(),E=0;E<y;E+=1){var M=v[E],_=r(M,E),S=h?null:l.get(_);S?(S.v&&mt(S.v,M),S.i&&mt(S.i,E),x&&C.skipped_effects.delete(S.e)):(S=Qi(l,h?a:Er??=nt(),M,_,E,i,t,n),h||(S.e.f|=Fe),l.set(_,S)),R.add(_)}if(y===0&&s&&!u&&(h?u=_e(()=>s(a)):(u=_e(()=>s(Er??=nt())),u.f|=Fe)),!h)if(x){for(const[A,T]of l)R.has(A)||C.skipped_effects.add(T.e);C.oncommit(g),C.ondiscard(()=>{})}else g();d(f)}),p={effect:w,items:l,outrogroups:null,fallback:u};h=!1}function Zi(e,t,n,r,i){var s=(r&ti)!==0,a=t.length,l=e.items,o=e.effect.first,c,u=null,f,v=[],h=[],g,w,p,y;if(s)for(y=0;y<a;y+=1)g=t[y],w=i(g,y),p=l.get(w).e,(p.f&Fe)===0&&(p.nodes?.a?.measure(),(f??=new Set).add(p));for(y=0;y<a;y+=1){if(g=t[y],w=i(g,y),p=l.get(w).e,e.outrogroups!==null)for(const T of e.outrogroups)T.pending.delete(p),T.done.delete(p);if((p.f&Fe)!==0)if(p.f^=Fe,p===o)Gt(p,null,n);else{var R=u?u.next:o;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),Je(e,u,p),Je(e,p,R),Gt(p,R,n),u=p,v=[],h=[],o=u.next;continue}if((p.f&pe)!==0&&(lr(p),s&&(p.nodes?.a?.unfix(),(f??=new Set).delete(p))),p!==o){if(c!==void 0&&c.has(p)){if(v.length<h.length){var C=h[0],x;u=C.prev;var E=v[0],M=v[v.length-1];for(x=0;x<v.length;x+=1)Gt(v[x],C,n);for(x=0;x<h.length;x+=1)c.delete(h[x]);Je(e,E.prev,M.next),Je(e,u,E),Je(e,M,C),o=C,u=M,y-=1,v=[],h=[]}else c.delete(p),Gt(p,o,n),Je(e,p.prev,p.next),Je(e,p,u===null?e.effect.first:u.next),Je(e,u,p),u=p;continue}for(v=[],h=[];o!==null&&o!==p;)(c??=new Set).add(o),h.push(o),o=o.next;if(o===null)continue}(p.f&Fe)===0&&v.push(p),u=p,o=p.next}if(e.outrogroups!==null){for(const T of e.outrogroups)T.pending.size===0&&(Xn(bn(T.done)),e.outrogroups?.delete(T));e.outrogroups.size===0&&(e.outrogroups=null)}if(o!==null||c!==void 0){var _=[];if(c!==void 0)for(p of c)(p.f&pe)===0&&_.push(p);for(;o!==null;)(o.f&pe)===0&&o!==e.fallback&&_.push(o),o=o.next;var S=_.length;if(S>0){var A=(r&Or)!==0&&a===0?n:null;if(s){for(y=0;y<S;y+=1)_[y].nodes?.a?.measure();for(y=0;y<S;y+=1)_[y].nodes?.a?.fix()}Ji(e,_,A)}}s&&Dt(()=>{if(f!==void 0)for(p of f)p.nodes?.a?.apply()})}function Qi(e,t,n,r,i,s,a,l){var o=(a&Qs)!==0?(a&ni)===0?H(n,!1,!1):gt(n):null,c=(a&ei)!==0?gt(i):null;return{v:o,i:c,e:_e(()=>(s(t,o??n,c??i,l),()=>{e.delete(r)}))}}function Gt(e,t,n){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,s=t&&(t.f&Fe)===0?t.nodes.start:n;r!==null;){var a=Qt(r);if(s.before(r),r===i)return;r=a}}function Je(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function ea(e,t,n=!1,r=!1,i=!1){var s=e,a="";W(()=>{var l=U;if(a!==(a=t()??"")&&(l.nodes!==null&&(is(l.nodes.start,l.nodes.end),l.nodes=null),a!=="")){var o=a+"";n?o=`<svg>${o}</svg>`:r&&(o=`<math>${o}</math>`);var c=ms(o);if((n||r)&&(c=Ze(c)),pn(Ze(c),c.lastChild),n||r)for(;Ze(c);)s.before(Ze(c));else s.before(c)}})}function ta(e,t,...n){var r=new _s(e);Tn(()=>{const i=t()??null;r.ensure(i,i&&(s=>i(s,...n)))},vt)}function bs(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=bs(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function na(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=bs(e))&&(r&&(r+=" "),r+=t);return r}function ra(e){return typeof e=="object"?na(e):e??""}const Mr=[...` 	
\r\f \v\uFEFF`];function sa(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var l=a+s;(a===0||Mr.includes(r[a-1]))&&(l===r.length||Mr.includes(r[l]))?r=(a===0?"":r.substring(0,a))+r.substring(l+1):a=l}}return r===""?null:r}function ia(e,t){return e==null?null:String(e)}function xe(e,t,n,r,i,s){var a=e.__className;if(a!==n||a===void 0){var l=sa(n,r,s);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(s&&i!==s)for(var o in s){var c=!!s[o];(i==null||c!==!!i[o])&&e.classList.toggle(o,c)}return s}function ws(e,t,n,r){var i=e.__style;if(i!==t){var s=ia(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}function ys(e,t,n=!1){if(e.multiple){if(t==null)return;if(!tr(t))return fi();for(var r of e.options)r.selected=t.includes(jt(r));return}for(r of e.options){var i=jt(r);if(Ti(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function aa(e){var t=new MutationObserver(()=>{ys(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Mn(()=>{t.disconnect()})}function oa(e,t,n=t){var r=new WeakSet,i=!0;Qr(e,"change",s=>{var a=s?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(a),jt);else{var o=e.querySelector(a)??e.querySelector("option:not([disabled])");l=o&&jt(o)}n(l),F!==null&&r.add(F)}),ns(()=>{var s=t();if(e===document.activeElement){var a=Ut??F;if(r.has(a))return}if(ys(e,s,i),i&&s===void 0){var l=e.querySelector(":checked");l!==null&&(s=jt(l),n(s))}e.__value=s,i=!1}),aa(e)}function jt(e){return"__value"in e?e.__value:e.value}const la=Symbol("is custom element"),ca=Symbol("is html");function ua(e,t){var n=Ss(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function qe(e,t,n,r){var i=Ss(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Us]=n),n==null?e.removeAttribute(t):typeof n!="string"&&fa(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ss(e){return e.__attributes??={[la]:e.nodeName.includes("-"),[ca]:e.namespaceURI===ui}}var Cr=new Map;function fa(e){var t=e.getAttribute("is")||e.nodeName,n=Cr.get(t);if(n)return n;Cr.set(t,n=[]);for(var r,i=e,s=Element.prototype;s!==i;){r=$r(i);for(var a in r)r[a].set&&n.push(a);i=nr(i)}return n}function an(e,t,n=t){var r=new WeakSet;Qr(e,"input",async i=>{var s=i?e.defaultValue:e.value;if(s=Rn(e)?On(s):s,n(s),F!==null&&r.add(F),await Gi(),s!==(s=t())){var a=e.selectionStart,l=e.selectionEnd,o=e.value.length;if(e.value=s??"",l!==null){var c=e.value.length;a===l&&l===o&&c>o?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=a,e.selectionEnd=Math.min(l,c))}}}),$(t)==null&&e.value&&(n(Rn(e)?On(e.value):e.value),F!==null&&r.add(F)),en(()=>{var i=t();if(e===document.activeElement){var s=Ut??F;if(r.has(s))return}Rn(e)&&i===On(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Rn(e){var t=e.type;return t==="number"||t==="range"}function On(e){return e===""?null:+e}function Tr(e,t){return e===t||e?.[Ge]===t}function Kt(e={},t,n,r){return ns(()=>{var i,s;return en(()=>{i=s,s=[],$(()=>{e!==n(...s)&&(t(e,...s),i&&Tr(n(...i),e)&&t(null,...i))})}),()=>{Dt(()=>{s&&Tr(n(...s),e)&&t(null,...s)})}}),e}function nn(e=!1){const t=j,n=t.l.u;if(!n)return;let r=()=>qi(t.s);if(e){let i=0,s={};const a=xn(()=>{let l=!1;const o=t.s;for(const c in o)o[c]!==s[c]&&(s[c]=o[c],l=!0);return l&&i++,i});r=()=>d(a)}n.b.length&&Di(()=>{kr(t,r),fn(n.b)}),Un(()=>{const i=$(()=>n.m.map(zs));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&Un(()=>{kr(t,r),fn(n.a)})}function kr(e,t){if(e.l.s)for(const n of e.l.s)d(n);t()}function cr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),ze;const r=$(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const yt=[];function da(e,t){return{subscribe:$e(e,t).subscribe}}function $e(e,t=ze){let n=null;const r=new Set;function i(l){if(Fr(e,l)&&(e=l,n)){const o=!yt.length;for(const c of r)c[1](),yt.push(c,e);if(o){for(let c=0;c<yt.length;c+=2)yt[c][0](yt[c+1]);yt.length=0}}}function s(l){i(l(e))}function a(l,o=ze){const c=[l,o];return r.add(c),r.size===1&&(n=t(i,s)||ze),l(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}function Lt(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return da(n,(a,l)=>{let o=!1;const c=[];let u=0,f=ze;const v=()=>{if(u)return;f();const g=t(r?c[0]:c,a,l);s?a(g):f=typeof g=="function"?g:ze},h=i.map((g,w)=>cr(g,p=>{c[w]=p,u&=~(1<<w),o&&v()},()=>{u|=1<<w}));return o=!0,v(),function(){fn(h),f(),o=!1}})}function Xe(e){let t;return cr(e,n=>t=n)(),t}let on=!1,Wn=Symbol();function V(e,t,n){const r=n[t]??={store:null,source:H(void 0),unsubscribe:ze};if(r.store!==e&&!(Wn in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=ze;else{var i=!0;r.unsubscribe=cr(e,s=>{i?r.source.v=s:z(r.source,s)}),i=!1}return e&&Wn in n?Xe(e):d(r.source)}function Rt(){const e={};function t(){Mn(()=>{for(var n in e)e[n].unsubscribe();Ir(e,Wn,{enumerable:!1,value:!0})})}return[e,t]}function va(e){var t=on;try{return on=!1,[e(),on]}finally{on=t}}function Ce(e,t,n,r){var i=!$t||(n&si)!==0,s=(n&ai)!==0,a=(n&oi)!==0,l=r,o=!0,c=()=>(o&&(o=!1,l=a?$(r):r),l),u;if(s){var f=Ge in e||Gs in e;u=Mt(e,t)?.set??(f&&t in e?C=>e[t]=C:void 0)}var v,h=!1;s?[v,h]=va(()=>e[t]):v=e[t],v===void 0&&r!==void 0&&(v=c(),u&&(i&&Hs(),u(v)));var g;if(i?g=()=>{var C=e[t];return C===void 0?c():(o=!0,C)}:g=()=>{var C=e[t];return C!==void 0&&(l=void 0),C===void 0?l:C},i&&(n&ii)===0)return g;if(u){var w=e.$$legacy;return(function(C,x){return arguments.length>0?((!i||!x||w||h)&&u(x?g():C),C):g()})}var p=!1,y=((n&ri)!==0?xn:ar)(()=>(p=!1,g()));s&&d(y);var R=U;return(function(C,x){if(arguments.length>0){const E=x?d(y):i&&s?Et(C):C;return z(y,E),p=!0,l!==void 0&&(l=E),C}return bt&&p||(R.f&Be)!==0?y.v:d(y)})}function kn(e){j===null&&Rr(),$t&&j.l!==null?ha(j).m.push(e):Un(()=>{const t=$(e);if(typeof t=="function")return t})}function xs(e){j===null&&Rr(),kn(()=>()=>$(e))}function ha(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const pa="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(pa);hi();class ga{propagator=null;config;currentSeed;isInitialized=!1;wasmModule=null;currentBackend="cpu";gpuAvailable=!1;constructor(t,n){this.config=t,this.currentSeed=n}async initialize(t="cpu"){try{const r="/autoverse/preview/pr-54/pkg/flow_lenia.js";this.wasmModule=await import(r),await this.wasmModule.default(),this.gpuAvailable=await this.checkWebGPU();const i=t==="gpu"&&this.gpuAvailable?"gpu":"cpu";await this.createPropagator(i),this.isInitialized=!0}catch(n){throw new Error(`Failed to initialize WASM: ${n}`)}}async checkWebGPU(){if(typeof navigator>"u"||!("gpu"in navigator))return!1;try{return await navigator.gpu.requestAdapter()!==null}catch{return!1}}async createPropagator(t){if(!this.wasmModule)throw new Error("WASM module not loaded");const n=JSON.stringify(this.config),r=JSON.stringify(this.currentSeed);t==="gpu"&&this.gpuAvailable?(this.propagator=await new this.wasmModule.WasmGpuPropagator(n,r),this.currentBackend="gpu"):(this.propagator=new this.wasmModule.WasmPropagator(n,r),this.currentBackend="cpu")}async switchBackend(t){if(!this.isInitialized)throw new Error("Simulation not initialized");return t==="gpu"&&!this.gpuAvailable?!1:(t===this.currentBackend||await this.createPropagator(t),!0)}isGpuAvailable(){return this.gpuAvailable}getBackend(){return this.currentBackend}async step(){this.ensureInitialized(),this.currentBackend==="gpu"?await this.propagator.step():this.propagator.step()}async run(t){this.ensureInitialized(),this.currentBackend==="gpu"?await this.propagator.run(BigInt(t)):this.propagator.run(BigInt(t))}getState(){return this.ensureInitialized(),this.propagator.getState()}reset(t){this.ensureInitialized(),t&&(this.currentSeed=t),this.propagator.reset(JSON.stringify(this.currentSeed))}totalMass(){return this.ensureInitialized(),this.propagator.totalMass()}getTime(){return this.ensureInitialized(),this.propagator.getTime()}getStep(){return this.ensureInitialized(),this.propagator.getStep()}getWidth(){return this.config.width}getHeight(){return this.config.height}getConfig(){return{...this.config}}extractRegion(t,n,r,i){this.ensureInitialized();const s=this.getState(),a=[];for(let l=0;l<s.channels.length;l++){const o=[];for(let c=0;c<i;c++)for(let u=0;u<r;u++){const f=(t+u)%s.width,h=(n+c)%s.height*s.width+f;o.push(s.channels[l][h])}a.push(o)}return{width:r,height:i,channels:a,sourceX:t,sourceY:n}}placeRegion(t,n,r){this.ensureInitialized();const i=this.getState(),s=new Map;for(let o=0;o<i.channels.length;o++)for(let c=0;c<i.height;c++)for(let u=0;u<i.width;u++){const f=c*i.width+u,v=i.channels[o][f];v>.001&&s.set(`${u},${c},${o}`,v)}for(let o=0;o<t.channels.length;o++)for(let c=0;c<t.height;c++)for(let u=0;u<t.width;u++){const f=(n+u)%this.config.width,v=(r+c)%this.config.height,h=c*t.width+u,g=t.channels[o][h];g>.001&&s.set(`${f},${v},${o}`,g)}const a=[];for(const[o,c]of s){const[u,f,v]=o.split(",").map(Number);a.push([u,f,v,c])}const l={pattern:{type:"Custom",values:a}};this.reset(l)}drawAt(t,n,r,i,s=0){this.ensureInitialized();const a=this.getState(),l=[];for(let c=0;c<a.channels.length;c++)for(let u=0;u<a.height;u++)for(let f=0;f<a.width;f++){const v=u*a.width+f;let h=a.channels[c][v];if(c===s){const g=f-t,w=u-n,p=Math.sqrt(g*g+w*w);if(p<=r){const y=1-p/r;h=Math.min(1,h+i*y*y)}}h>.001&&l.push([f,u,c,h])}const o={pattern:{type:"Custom",values:l}};this.reset(o)}eraseAt(t,n,r,i=0){this.ensureInitialized();const s=this.getState(),a=[];for(let o=0;o<s.channels.length;o++)for(let c=0;c<s.height;c++)for(let u=0;u<s.width;u++){const f=c*s.width+u;let v=s.channels[o][f];if(o===i){const h=u-t,g=c-n,w=Math.sqrt(h*h+g*g);if(w<=r){const p=1-w/r;v=Math.max(0,v*(1-p*p))}}v>.001&&a.push([u,c,o,v])}const l={pattern:{type:"Custom",values:a}};this.reset(l)}ensureInitialized(){if(!this.isInitialized||!this.propagator)throw new Error("Simulation not initialized. Call initialize() first.")}}const Hn={width:128,height:128,channels:1,dt:.1,kernel_radius:13,kernels:[{radius:1,rings:[{amplitude:1,distance:.5,width:.15}],weight:1,mu:.15,sigma:.015,source_channel:0,target_channel:0}],flow:{beta_a:1,n:2,distribution_size:1}},ma={pattern:{type:"GaussianBlob",center:[.5,.5],radius:.1,amplitude:1,channel:0}},_a={initialized:!1,playing:!1,step:0,time:0,totalMass:0,fps:0,frameTime:0,backend:"cpu",gpuAvailable:!1,config:Hn,state:null},ne=$e(_a),Es=$e([]);function G(e,t="info"){Es.update(n=>[...n.slice(-100),{message:e,level:t,timestamp:Date.now()}])}let X=null,ln=null,Xt=0,cn=0,Vn=0,Ms=1;function Kn(){return X}function ba(e){Ms=Math.max(1,Math.min(10,e))}async function wa(){X=new ga(Hn,ma),await X.initialize();const e=X.getState();ne.update(t=>({...t,initialized:!0,step:X.getStep(),time:X.getTime(),totalMass:X.totalMass(),backend:X.getBackend(),gpuAvailable:X.isGpuAvailable(),config:Hn,state:e}))}function ya(){!X||Xe(ne).playing||(ne.update(t=>({...t,playing:!0})),Xt=performance.now(),Vn=Xt,cn=0,Ts(Xt),G("Simulation started","info"))}function Cs(){ne.update(e=>({...e,playing:!1})),ln!==null&&(cancelAnimationFrame(ln),ln=null),G("Simulation paused","info")}async function Sa(){X&&(await X.step(),fr())}function ur(e){X&&(X.reset(e),fr(),G("Simulation reset","info"))}async function xa(e){if(!X)return!1;const t=await X.switchBackend(e);return t?(ne.update(n=>({...n,backend:e})),G(`Switched to ${e.toUpperCase()} backend`,"success")):G(`Failed to switch to ${e} backend`,"error"),t}async function Ts(e){if(!Xe(ne).playing||!X)return;const n=e-Xt;Xt=e,await X.run(Ms),fr(),cn++,e-Vn>=1e3&&(ne.update(r=>({...r,fps:cn,frameTime:n})),cn=0,Vn=e),ln=requestAnimationFrame(r=>Ts(r))}function fr(){if(!X)return;const e=X.getState();ne.update(t=>({...t,step:X.getStep(),time:X.getTime(),totalMass:X.totalMass(),state:e}))}const Ea=Lt(ne,e=>e.time.toFixed(2)),Ma=Lt(ne,e=>e.totalMass.toLocaleString(void 0,{maximumFractionDigits:0})),Ca=Lt(ne,e=>e.step.toString().padStart(8,"0")),Ta={mode:"view",brushSize:5,brushIntensity:.8,colorScheme:"theme",visualizationMode:"mass",showGrid:!1,showScanlines:!0,showSelection:!0,zoom:1,panX:0,panY:0},Ot=$e(Ta);function ka(e){Ot.update(t=>({...t,mode:e}))}function Aa(e){Ot.update(t=>({...t,brushSize:Math.max(1,Math.min(50,e))}))}function Ia(e){Ot.update(t=>({...t,brushIntensity:Math.max(0,Math.min(1,e))}))}const Jt=[{id:"void",name:"VOID",colors:{primary:"#a855f7",primaryDim:"#6b21a8",primaryGlow:"rgba(168, 85, 247, 0.4)",secondary:"#3b82f6",secondaryDim:"#1e40af",secondaryGlow:"rgba(59, 130, 246, 0.4)",tertiary:"#ec4899",tertiaryDim:"#9d174d",tertiaryGlow:"rgba(236, 72, 153, 0.4)",success:"#a855f7",warning:"#f59e0b",danger:"#ef4444"}},{id:"neon-tokyo",name:"NEON TOKYO",colors:{primary:"#ff2d95",primaryDim:"#9d1a5a",primaryGlow:"rgba(255, 45, 149, 0.4)",secondary:"#00f0ff",secondaryDim:"#0891b2",secondaryGlow:"rgba(0, 240, 255, 0.4)",tertiary:"#ffee00",tertiaryDim:"#a38a00",tertiaryGlow:"rgba(255, 238, 0, 0.4)",success:"#00f0ff",warning:"#ffee00",danger:"#ff2d95"}},{id:"synthwave",name:"SYNTHWAVE",colors:{primary:"#f472b6",primaryDim:"#a21caf",primaryGlow:"rgba(244, 114, 182, 0.4)",secondary:"#818cf8",secondaryDim:"#4338ca",secondaryGlow:"rgba(129, 140, 248, 0.4)",tertiary:"#22d3ee",tertiaryDim:"#0e7490",tertiaryGlow:"rgba(34, 211, 238, 0.4)",success:"#22d3ee",warning:"#fbbf24",danger:"#f43f5e"}},{id:"bloodmoon",name:"BLOODMOON",colors:{primary:"#dc2626",primaryDim:"#7f1d1d",primaryGlow:"rgba(220, 38, 38, 0.4)",secondary:"#f97316",secondaryDim:"#9a3412",secondaryGlow:"rgba(249, 115, 22, 0.4)",tertiary:"#fbbf24",tertiaryDim:"#92400e",tertiaryGlow:"rgba(251, 191, 36, 0.4)",success:"#f97316",warning:"#fbbf24",danger:"#dc2626"}},{id:"toxic",name:"TOXIC",colors:{primary:"#84cc16",primaryDim:"#3f6212",primaryGlow:"rgba(132, 204, 22, 0.5)",secondary:"#facc15",secondaryDim:"#854d0e",secondaryGlow:"rgba(250, 204, 21, 0.4)",tertiary:"#22c55e",tertiaryDim:"#166534",tertiaryGlow:"rgba(34, 197, 94, 0.4)",success:"#22c55e",warning:"#facc15",danger:"#ef4444"}},{id:"ice",name:"ICE",colors:{primary:"#38bdf8",primaryDim:"#0369a1",primaryGlow:"rgba(56, 189, 248, 0.4)",secondary:"#e0f2fe",secondaryDim:"#7dd3fc",secondaryGlow:"rgba(224, 242, 254, 0.3)",tertiary:"#a5b4fc",tertiaryDim:"#4f46e5",tertiaryGlow:"rgba(165, 180, 252, 0.4)",success:"#38bdf8",warning:"#fcd34d",danger:"#f87171"}},{id:"hacker",name:"HACKER",colors:{primary:"#22c55e",primaryDim:"#166534",primaryGlow:"rgba(34, 197, 94, 0.5)",secondary:"#4ade80",secondaryDim:"#15803d",secondaryGlow:"rgba(74, 222, 128, 0.4)",tertiary:"#86efac",tertiaryDim:"#22c55e",tertiaryGlow:"rgba(134, 239, 172, 0.3)",success:"#22c55e",warning:"#fbbf24",danger:"#ef4444"}},{id:"phosphor",name:"PHOSPHOR",colors:{primary:"#fef08a",primaryDim:"#a16207",primaryGlow:"rgba(254, 240, 138, 0.5)",secondary:"#fde047",secondaryDim:"#854d0e",secondaryGlow:"rgba(253, 224, 71, 0.4)",tertiary:"#fbbf24",tertiaryDim:"#92400e",tertiaryGlow:"rgba(251, 191, 36, 0.4)",success:"#a3e635",warning:"#fbbf24",danger:"#f87171"}}],An=$e(Jt[0]);function Jn(e){const t=document.documentElement,{colors:n}=e;t.style.setProperty("--color-primary",n.primary),t.style.setProperty("--color-primary-dim",n.primaryDim),t.style.setProperty("--color-primary-glow",n.primaryGlow),t.style.setProperty("--color-secondary",n.secondary),t.style.setProperty("--color-secondary-dim",n.secondaryDim),t.style.setProperty("--color-secondary-glow",n.secondaryGlow),t.style.setProperty("--color-tertiary",n.tertiary),t.style.setProperty("--color-tertiary-dim",n.tertiaryDim),t.style.setProperty("--color-tertiary-glow",n.tertiaryGlow),t.style.setProperty("--color-success",n.success),t.style.setProperty("--color-warning",n.warning),t.style.setProperty("--color-danger",n.danger),An.set(e),localStorage.setItem("autoverse-theme",e.id)}function $a(e){const t=Jt.find(n=>n.id===e);t&&Jn(t)}function Da(){const e=localStorage.getItem("autoverse-theme");if(e){const t=Jt.find(n=>n.id===e);if(t){Jn(t);return}}Jn(Jt[0])}const Zn=$e(null),ks=$e(0);function Pa(){ks.update(e=>e+1)}function La(e,t){const n=Xe(Zn);n&&n.startDragFromLibrary(e,t)}const Qn=$e(null);var Ra=D("<button></button>"),Oa=D('<header class="header svelte-4b3o1e"><div class="header-left svelte-4b3o1e"><pre class="ascii-logo svelte-4b3o1e"></pre></div> <div class="header-right svelte-4b3o1e"><div class="theme-picker svelte-4b3o1e"><span class="picker-label svelte-4b3o1e">THEME</span> <div class="theme-swatches svelte-4b3o1e"></div></div> <div><span class="backend-label svelte-4b3o1e">COMPUTE</span> <span class="backend-value svelte-4b3o1e"> </span></div></div></header>');function Na(e,t){st(t,!1);const n=()=>V(An,"$currentScheme",i),r=()=>V(ne,"$simulationStore",i),[i,s]=Rt();nn();var a=Oa(),l=m(a),o=m(l);o.textContent=`
 ▄▀▄ █ █ ▀█▀ ▄▀▄ █ █ █▀▀ █▀▄ ▄▀▀ █▀▀
 █▀█ █▄█  █  █ █ ▀▄▀ ██▄ █▀▄ ▄██ ██▄`;var c=b(l,2),u=m(c),f=b(m(u),2);Vt(f,5,()=>Jt,gn,(p,y)=>{var R=Ra();let C;R.__click=()=>$a(d(y).id),W(()=>{C=xe(R,1,"swatch svelte-4b3o1e",null,C,{active:n().id===d(y).id}),ws(R,`--swatch-color: ${d(y).colors.primary??""}`),qe(R,"title",d(y).name)}),k(p,R)});var v=b(u,2);let h;var g=b(m(v),2),w=m(g);W(p=>{h=xe(v,1,"backend-indicator svelte-4b3o1e",null,h,{gpu:r().backend==="gpu"}),Y(w,p)},[()=>r().backend.toUpperCase()]),k(e,a),it(),s()}tn(["click"]);var Fa=D('<footer class="footer svelte-ww03jg"></footer>');function za(e){var t=Fa();k(e,t)}var Ba=D("<div> </div>"),Ga=D('<div><div class="corner top-left svelte-1gtc57s"></div> <div class="corner top-right svelte-1gtc57s"></div> <div class="corner bottom-left svelte-1gtc57s"></div> <div class="corner bottom-right svelte-1gtc57s"></div> <!> <div><!></div></div>');function Qe(e,t){let n=Ce(t,"borderColor",3,"primary"),r=Ce(t,"noPadding",3,!1),i=Ce(t,"class",3,"");const s={primary:"border-primary",secondary:"border-secondary",tertiary:"border-tertiary"};var a=Ga(),l=b(m(a),8);{var o=v=>{var h=Ba(),g=m(h);W(()=>{xe(h,1,`title ${s[n()]??""}`,"svelte-1gtc57s"),Y(g,t.title)}),k(v,h)};ie(l,v=>{t.title&&v(o)})}var c=b(l,2);let u;var f=m(c);ta(f,()=>t.children??ze),W(()=>{xe(a,1,`tui-box ${s[n()]??""} ${i()??""}`,"svelte-1gtc57s"),u=xe(c,1,"content svelte-1gtc57s",null,u,{"no-padding":r()})}),k(e,a)}var Ua=D('<span class="label svelte-1l5vt72"> </span>'),qa=D("<span> </span>"),Ya=D('<div class="slider-header svelte-1l5vt72"><!> <!></div>'),ja=D('<div class="slider-container svelte-1l5vt72"><!> <input type="range"/></div>');function Nn(e,t){st(t,!0);let n=Ce(t,"value",15),r=Ce(t,"min",3,0),i=Ce(t,"max",3,100),s=Ce(t,"step",3,1),a=Ce(t,"showValue",3,!0),l=Ce(t,"valueFormat",3,g=>String(g)),o=Ce(t,"color",3,"tertiary");function c(g){const w=g.target;n(parseFloat(w.value)),t.onchange?.(n())}var u=ja(),f=m(u);{var v=g=>{var w=Ya(),p=m(w);{var y=x=>{var E=Ua(),M=m(E);W(()=>Y(M,t.label)),k(x,E)};ie(p,x=>{t.label&&x(y)})}var R=b(p,2);{var C=x=>{var E=qa(),M=m(E);W(_=>{xe(E,1,`value ${o()??""}`,"svelte-1l5vt72"),Y(M,_)},[()=>l()(n())]),k(x,E)};ie(R,x=>{a()&&x(C)})}k(g,w)};ie(f,g=>{(t.label||a())&&g(v)})}var h=b(f,2);h.__input=c,W(()=>{xe(h,1,ra(o()),"svelte-1l5vt72"),qe(h,"min",r()),qe(h,"max",i()),qe(h,"step",s()),ua(h,n())}),k(e,u),it()}tn(["input"]);var Xa=D('<span class="icon svelte-oaxjxu">&#9724;</span> <span class="label svelte-oaxjxu">PAUSE</span>',1),Wa=D('<span class="icon svelte-oaxjxu">&#9654;</span> <span class="label svelte-oaxjxu">PLAY</span>',1),Ha=D('<div class="control-grid svelte-oaxjxu"><button><!></button> <button class="control-btn svelte-oaxjxu"><span class="icon svelte-oaxjxu">&#9655;</span> <span class="label svelte-oaxjxu">STEP</span></button> <button class="control-btn svelte-oaxjxu"><span class="icon svelte-oaxjxu">&#8634;</span> <span class="label svelte-oaxjxu">RESET</span></button></div> <div class="speed-control svelte-oaxjxu"><!></div>',1),Va=D('<button><span class="icon svelte-oaxjxu"><!></span> <span class="label svelte-oaxjxu"> </span></button>'),Ka=D('<div class="brush-settings svelte-oaxjxu"><!> <!></div>'),Ja=D('<div class="tool-grid svelte-oaxjxu"></div> <!>',1),Za=D('<div><span class="log-prefix svelte-oaxjxu">&gt;</span> <span class="log-message svelte-oaxjxu"> </span></div>'),Qa=D('<div class="log-container svelte-oaxjxu"></div>'),eo=D('<aside class="left-sidebar svelte-oaxjxu"><!> <!> <!></aside>');function to(e,t){st(t,!0);const n=()=>V(ne,"$simulationStore",s),r=()=>V(Ot,"$settings",s),i=()=>V(Es,"$systemLog",s),[s,a]=Rt();let l=Le(1);function o(w){z(l,w,!0),ba(w)}function c(w){ka(w)}const u=[{id:"view",label:"VIEW",icon:"&#9673;"},{id:"select",label:"SEL",icon:"&#9633;"},{id:"draw",label:"DRAW",icon:"&#9998;"},{id:"erase",label:"ERASE",icon:"&#9747;"}];var f=eo(),v=m(f);Qe(v,{title:"SYS.CONTROL",borderColor:"primary",children:(w,p)=>{var y=Ha(),R=rt(y),C=m(R);let x;C.__click=()=>n().playing?Cs():ya();var E=m(C);{var M=P=>{var B=Xa();k(P,B)},_=P=>{var B=Wa();k(P,B)};ie(E,P=>{n().playing?P(M):P(_,!1)})}var S=b(C,2);S.__click=()=>Sa();var A=b(S,2);A.__click=()=>ur();var T=b(R,2),I=m(T);Nn(I,{label:"SIM SPEED",min:1,max:10,step:1,color:"primary",valueFormat:P=>`${P}X`,onchange:o,get value(){return d(l)},set value(P){z(l,P,!0)}}),W(()=>x=xe(C,1,"control-btn svelte-oaxjxu",null,x,{active:!n().playing})),k(w,y)},$$slots:{default:!0}});var h=b(v,2);Qe(h,{title:"TOOL.KIT",borderColor:"tertiary",children:(w,p)=>{var y=Ja(),R=rt(y);Vt(R,21,()=>u,gn,(E,M)=>{var _=Va();let S;_.__click=()=>c(d(M).id);var A=m(_),T=m(A);ea(T,()=>d(M).icon);var I=b(A,2),P=m(I);W(()=>{S=xe(_,1,"tool-btn svelte-oaxjxu",null,S,{active:r().mode===d(M).id}),Y(P,d(M).label)}),k(E,_)});var C=b(R,2);{var x=E=>{var M=Ka(),_=m(M);Nn(_,{label:"BRUSH SIZE",get value(){return r().brushSize},min:1,max:30,step:1,color:"tertiary",valueFormat:T=>`${T}PX`,get onchange(){return Aa}});var S=b(_,2);{var A=T=>{Nn(T,{label:"INTENSITY",get value(){return r().brushIntensity},min:0,max:1,step:.05,color:"tertiary",valueFormat:I=>`${Math.round(I*100)}%`,get onchange(){return Ia}})};ie(S,T=>{r().mode==="draw"&&T(A)})}k(E,M)};ie(C,E=>{(r().mode==="draw"||r().mode==="erase")&&E(x)})}k(w,y)},$$slots:{default:!0}});var g=b(h,2);Qe(g,{title:"DEBUG.LOG",borderColor:"secondary",class:"debug-log-box",children:(w,p)=>{var y=Qa();Vt(y,5,i,gn,(R,C)=>{var x=Za(),E=b(m(x),2),M=m(E);W(()=>{xe(x,1,`log-entry ${d(C).level??""}`,"svelte-oaxjxu"),Y(M,d(C).message)}),k(R,x)}),k(w,y)},$$slots:{default:!0}}),k(e,f),it(),a()}tn(["click"]);const no={initialized:!1,running:!1,progress:null,result:null,bestState:null,error:null},Q=$e(no);Lt(Q,e=>e.running);Lt(Q,e=>e.progress);Lt(Q,e=>e.bestState);let mn=null,J=null,un=null,ft=null,dt=null,er=0;const ro=750,so=2;function dr(e){return typeof e=="string"?JSON.parse(e):e}function As(e,t=0){if("requestIdleCallback"in window){const{requestIdleCallback:n}=window;return{id:n(e,{timeout:t}),type:"idle"}}return{id:window.setTimeout(e,t),type:"timeout"}}function _n(e){if(e)if(e.type==="idle"&&"cancelIdleCallback"in window){const{cancelIdleCallback:t}=window;t(e.id)}else clearTimeout(e.id)}function io(){if(!J||ft||performance.now()-er<ro)return;const t=J;ft=As(()=>{if(ft=null,!(!J||J!==t))try{const n=dr(J.getBestCandidateState());er=performance.now(),Q.update(r=>({...r,bestState:n}))}catch(n){G(`Failed to update best candidate preview: ${n}`,"warn")}},200)}function Is(){if(!J||dt)return;const e=J;dt=As(()=>{if(dt=null,!(!J||J!==e))try{const t=dr(J.getResult());Q.update(n=>({...n,result:t})),G(`Evolution complete: fitness=${t.best_fitness.toFixed(3)}, reason=${t.stop_reason}`,"success")}catch(t){Q.update(n=>({...n,error:String(t)})),G(`Evolution error: ${t}`,"error")}},200)}async function ao(){try{mn=await import("/autoverse/preview/pr-54/pkg/flow_lenia.js"),await mn.default(),Q.update(n=>({...n,initialized:!0})),G("Evolution engine initialized","success")}catch(e){throw G(`Failed to initialize evolution: ${e}`,"error"),e}}function oo(){return{base_config:Xe(ne).config,seed_pattern_type:"Blob",constraints:{radius:{min:.05,max:.25},amplitude:{min:.5,max:2},x:{min:.3,max:.7},y:{min:.3,max:.7}},fitness:{metrics:[{metric:"Persistence",weight:1},{metric:"Compactness",weight:.5},{metric:"Locomotion",weight:.3}],aggregation:"WeightedSum"},evaluation:{steps:200,sample_interval:10,warmup_steps:20},population:{size:20,elitism:2},algorithm:{type:"GeneticAlgorithm",config:{mutation_rate:.15,crossover_rate:.7,selection_method:"Tournament",tournament_size:3}},archive:{enabled:!0,max_size:50,diversity_threshold:.1},max_generations:50,target_fitness:.95,stagnation_limit:15}}async function lo(e){if(!mn)throw new Error("Evolution module not initialized");Cs(),Ds();try{J&&J.free(),_n(ft),_n(dt),ft=null,dt=null,er=0,J=new mn.WasmEvolutionEngine(JSON.stringify(e)),Q.update(t=>({...t,running:!0,progress:null,result:null,error:null})),G(`Evolution started: pop=${e.population.size}, gens=${e.max_generations}`,"info"),$s()}catch(t){throw Q.update(n=>({...n,error:String(t)})),G(`Evolution error: ${t}`,"error"),t}}function $s(){if(!(!Xe(Q).running||!J))try{const t=dr(J.stepBudget(so));if(Q.update(n=>({...n,progress:t})),io(),J.isComplete()){Q.update(n=>({...n,running:!1})),Is();return}un=requestAnimationFrame(()=>$s())}catch(t){Q.update(n=>({...n,running:!1,error:String(t)})),G(`Evolution error: ${t}`,"error")}}function Ds(){un!==null&&(cancelAnimationFrame(un),un=null),_n(ft),_n(dt),ft=null,dt=null;const e=Xe(Q);J&&e.running&&(J.cancel(),Is(),G("Evolution cancelled","warn")),Q.update(t=>({...t,running:!1}))}function co(){const e=Xe(Q);if(!e.bestState){G("No evolved pattern to load","warn");return}const{width:t,height:n,data:r}=e.bestState,i=[];for(let s=0;s<n;s++)for(let a=0;a<t;a++){const l=s*t+a,o=r[l];o>.001&&i.push([a,s,0,o])}ur({pattern:{type:"Custom",values:i}}),G("Loaded evolved pattern into simulation","success")}var uo=D('<div class="progress-display svelte-auxm5"><div class="progress-row svelte-auxm5"><span class="label svelte-auxm5">GEN</span> <span class="value svelte-auxm5"> </span></div> <div class="progress-row svelte-auxm5"><span class="label svelte-auxm5">FIT</span> <span class="value highlight svelte-auxm5"> </span></div> <div class="progress-bar svelte-auxm5"><div class="progress-fill svelte-auxm5"></div></div></div>'),fo=D('<div class="result-display svelte-auxm5"><div class="result-row svelte-auxm5"><span class="label svelte-auxm5">RESULT</span> <span class="value success svelte-auxm5"> </span></div> <div class="result-reason svelte-auxm5"> </div></div>'),vo=D('<div class="idle-status svelte-auxm5">READY</div>'),ho=D('<button class="evo-btn danger svelte-auxm5">STOP</button>'),po=D('<button class="evo-btn secondary svelte-auxm5">LOAD</button>'),go=D('<button class="evo-btn primary svelte-auxm5">EVOLVE</button> <!>',1),mo=D('<div class="evolution-panel svelte-auxm5"><div class="preview-container svelte-auxm5"><canvas width="64" height="64" class="preview-canvas svelte-auxm5"></canvas> <span class="preview-label svelte-auxm5">BEST</span></div> <!> <div class="controls svelte-auxm5"><!></div> <details class="settings svelte-auxm5"><summary class="svelte-auxm5">SETTINGS</summary> <div class="settings-grid svelte-auxm5"><label class="svelte-auxm5"><span class="svelte-auxm5">POP</span> <input type="number" min="4" max="50" step="2" class="svelte-auxm5"/></label> <label class="svelte-auxm5"><span class="svelte-auxm5">GENS</span> <input type="number" min="10" max="200" step="10" class="svelte-auxm5"/></label> <label class="svelte-auxm5"><span class="svelte-auxm5">MUT%</span> <input type="number" min="1" max="50" step="1" class="svelte-auxm5"/></label> <label class="svelte-auxm5"><span class="svelte-auxm5">STEPS</span> <input type="number" min="50" max="500" step="50" class="svelte-auxm5"/></label></div> <label class="goal-select svelte-auxm5"><span class="svelte-auxm5">GOAL</span> <select class="svelte-auxm5"><option>Survival</option><option>Glider</option><option>Oscillator</option><option>Complex</option></select></label></details></div>');function _o(e,t){st(t,!1);const n=()=>V(Q,"$evolutionStore",r),[r,i]=Rt();let s=H(),a=H(null),l=H(20),o=H(50),c=.95,u=H(15),f=H(200),v=H("survival");function h(x){if(!d(a)||!d(s))return;const{width:E,height:M,data:_}=x,S=d(s).width,A=d(s).height,T=d(a).createImageData(E,M);for(let B=0;B<_.length;B++){const L=Math.floor(Math.min(1,Math.max(0,_[B]))*255);T.data[B*4]=L,T.data[B*4+1]=L,T.data[B*4+2]=L,T.data[B*4+3]=255}const I=new OffscreenCanvas(E,M),P=I.getContext("2d");P&&(P.putImageData(T,0,0),Re(a,d(a).imageSmoothingEnabled=!1),d(a).clearRect(0,0,S,A),d(a).drawImage(I,0,0,S,A))}function g(x){switch(x){case"glider":return[{metric:"Persistence",weight:1},{metric:"Locomotion",weight:1.5},{metric:"Compactness",weight:.5}];case"oscillator":return[{metric:"Persistence",weight:1},{metric:"Stability",weight:.8},{metric:"Compactness",weight:.5}];case"complex":return[{metric:"Persistence",weight:1},{metric:"Complexity",weight:1.2},{metric:"MassConcentration",weight:.3}];default:return[{metric:"Persistence",weight:1},{metric:"Compactness",weight:.5},{metric:"Stability",weight:.3}]}}function w(){return{...oo(),population:{size:d(l),elitism:Math.max(1,Math.floor(d(l)/10))},max_generations:d(o),target_fitness:c,stagnation_limit:Math.max(5,Math.floor(d(o)/3)),algorithm:{type:"GeneticAlgorithm",config:{mutation_rate:d(u)/100,crossover_rate:.7,selection_method:"Tournament",tournament_size:3}},evaluation:{steps:d(f),sample_interval:Math.max(1,Math.floor(d(f)/20)),warmup_steps:Math.floor(d(f)/10)},fitness:{metrics:g(d(v)),aggregation:"WeightedSum"}}}async function p(){const x=w();try{await lo(x)}catch(E){G(`Failed to start evolution: ${E}`,"error")}}function y(){Ds()}function R(){co()}function C(x){switch(x){case"TargetReached":return"TARGET HIT";case"MaxGenerations":return"MAX GENS";case"Stagnation":return"STAGNANT";case"Cancelled":return"CANCELLED";default:return x}}kn(async()=>{if(z(a,d(s)?.getContext("2d")??null),!n().initialized)try{await ao()}catch{}}),Ne(()=>(d(a),n()),()=>{d(a)&&n().bestState&&h(n().bestState)}),Cn(),nn(),Qe(e,{title:"EVOLVE",borderColor:"tertiary",children:(x,E)=>{var M=mo(),_=m(M),S=m(_);Kt(S,q=>z(s,q),()=>d(s));var A=b(_,2);{var T=q=>{var Se=uo(),Ke=m(Se),Ft=b(m(Ke),2),zt=m(Ft),ve=b(Ke,2),Pe=b(m(ve),2),rn=m(Pe),Dn=b(ve,2),Pn=m(Dn);W(Ln=>{Y(zt,`${n(),$(()=>n().progress.generation)??""}/${d(o)??""}`),Y(rn,Ln),ws(Pn,`width: ${n(),d(o),$(()=>n().progress.generation/d(o)*100)??""}%`)},[()=>(n(),$(()=>n().progress.best_fitness.toFixed(3)))]),k(q,Se)},I=q=>{var Se=jn(),Ke=rt(Se);{var Ft=ve=>{var Pe=fo(),rn=m(Pe),Dn=b(m(rn),2),Pn=m(Dn),Ln=b(rn,2),Ps=m(Ln);W((Ls,Rs)=>{Y(Pn,Ls),Y(Ps,Rs)},[()=>(n(),$(()=>n().result.best_fitness.toFixed(3))),()=>(n(),$(()=>C(n().result.stop_reason)))]),k(ve,Pe)},zt=ve=>{var Pe=vo();k(ve,Pe)};ie(Ke,ve=>{n(),$(()=>n().result)?ve(Ft):ve(zt,!1)},!0)}k(q,Se)};ie(A,q=>{n(),$(()=>n().running&&n().progress)?q(T):q(I,!1)})}var P=b(A,2),B=m(P);{var L=q=>{var Se=ho();Se.__click=y,k(q,Se)},O=q=>{var Se=go(),Ke=rt(Se);Ke.__click=p;var Ft=b(Ke,2);{var zt=ve=>{var Pe=po();Pe.__click=R,k(ve,Pe)};ie(Ft,ve=>{n(),$(()=>n().bestState)&&ve(zt)})}W(()=>Ke.disabled=(n(),$(()=>!n().initialized))),k(q,Se)};ie(B,q=>{n(),$(()=>n().running)?q(L):q(O,!1)})}var K=b(P,2),ae=b(m(K),2),fe=m(ae),De=b(m(fe),2),we=b(fe,2),ye=b(m(we),2),We=b(we,2),de=b(m(We),2),at=b(We,2),He=b(m(at),2),oe=b(ae,2),Ve=b(m(oe),2);W(()=>{d(v),Ni(()=>{})});var Nt=m(Ve);Nt.value=Nt.__value="survival";var In=b(Nt);In.value=In.__value="glider";var $n=b(In);$n.value=$n.__value="oscillator";var hr=b($n);hr.value=hr.__value="complex",an(De,()=>d(l),q=>z(l,q)),an(ye,()=>d(o),q=>z(o,q)),an(de,()=>d(u),q=>z(u,q)),an(He,()=>d(f),q=>z(f,q)),oa(Ve,()=>d(v),q=>z(v,q)),k(x,M)},$$slots:{default:!0}}),it(),i()}tn(["click"]);const Ar="flow-lenia-presets";class bo{presets=new Map;listeners=new Set;constructor(){this.loadFromStorage()}generateId(){return`preset-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}createThumbnail(t,n=64){const r=document.createElement("canvas");r.width=n,r.height=n;const i=r.getContext("2d"),s=i.createImageData(t.width,t.height),a=t.channels[0];for(let g=0;g<a.length;g++){const w=Math.max(0,Math.min(1,a[g])),p=Math.floor(w*255);s.data[g*4+0]=p,s.data[g*4+1]=p,s.data[g*4+2]=p,s.data[g*4+3]=255}const l=document.createElement("canvas");l.width=t.width,l.height=t.height,l.getContext("2d").putImageData(s,0,0),i.imageSmoothingEnabled=!0,i.fillStyle="#1a1a1a",i.fillRect(0,0,n,n);const c=Math.min(n/t.width,n/t.height),u=t.width*c,f=t.height*c,v=(n-u)/2,h=(n-f)/2;return i.drawImage(l,v,h,u,f),r.toDataURL("image/png")}savePreset(t,n,r){const i={id:this.generateId(),name:t,description:r,thumbnail:this.createThumbnail(n),region:n,createdAt:Date.now()};return this.presets.set(i.id,i),this.persistToStorage(),this.notifyListeners(),i}getPreset(t){return this.presets.get(t)}getAllPresets(){return Array.from(this.presets.values()).sort((t,n)=>n.createdAt-t.createdAt)}deletePreset(t){const n=this.presets.delete(t);return n&&(this.persistToStorage(),this.notifyListeners()),n}renamePreset(t,n){const r=this.presets.get(t);return r?(r.name=n,this.persistToStorage(),this.notifyListeners(),!0):!1}updateDescription(t,n){const r=this.presets.get(t);return r?(r.description=n,this.persistToStorage(),this.notifyListeners(),!0):!1}exportPresets(t){const n=t?t.map(r=>this.presets.get(r)).filter(Boolean):this.getAllPresets();return JSON.stringify(n,null,2)}importPresets(t){try{const n=JSON.parse(t);let r=0;for(const i of n){const s={...i,id:this.generateId(),createdAt:Date.now()};this.presets.set(s.id,s),r++}return this.persistToStorage(),this.notifyListeners(),r}catch{throw new Error("Invalid preset JSON format")}}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notifyListeners(){const t=this.getAllPresets();for(const n of this.listeners)n(t)}persistToStorage(){try{const t=JSON.stringify(Array.from(this.presets.entries()));localStorage.setItem(Ar,t)}catch(t){console.warn("Failed to persist presets to storage:",t)}}loadFromStorage(){try{const t=localStorage.getItem(Ar);if(t){const n=JSON.parse(t);this.presets=new Map(n)}}catch(t){console.warn("Failed to load presets from storage:",t),this.presets=new Map}}clearAll(){this.presets.clear(),this.persistToStorage(),this.notifyListeners()}}const wo=[{name:"Glider",description:"A simple glider that moves across the grid",seed:{pattern:{type:"GaussianBlob",center:[.5,.5],radius:.1,amplitude:1,channel:0}}},{name:"Ring",description:"A ring pattern that expands",seed:{pattern:{type:"Ring",center:[.5,.5],inner_radius:.05,outer_radius:.1,amplitude:1,channel:0}}},{name:"Dual Blobs",description:"Two interacting blobs",seed:{pattern:{type:"MultiBlob",blobs:[{center:[.35,.5],radius:.08,amplitude:1,channel:0},{center:[.65,.5],radius:.08,amplitude:1,channel:0}]}}},{name:"Random Noise",description:"Random initial conditions",seed:{pattern:{type:"Noise",seed:42,amplitude:.5,channel:0}}}],At=new bo,vr=$e(At.getAllPresets());At.subscribe(e=>{vr.set(e)});function yo(e){const t=At.getAllPresets().find(n=>n.id===e);At.deletePreset(e),t&&G(`Deleted preset: ${t.name}`,"info")}function So(){const e=At.exportPresets();return G(`Exported ${Xe(vr).length} presets`,"success"),e}function xo(e){try{const t=At.importPresets(e);return G(`Imported ${t} presets`,"success"),Pa(),t}catch(t){throw G(`Import failed: ${t}`,"error"),t}}function Eo(){const e=So(),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="flow-lenia-presets.json",r.click(),URL.revokeObjectURL(n)}var Mo=D('<div class="metric-display svelte-1baw31t"><div class="metric-main svelte-1baw31t"><span class="metric-value svelte-1baw31t"> </span> <span class="metric-unit svelte-1baw31t">STEPS</span></div> <div class="metric-row svelte-1baw31t"><div class="metric-item svelte-1baw31t"><span class="metric-label svelte-1baw31t">TIME</span> <span class="metric-num svelte-1baw31t"> </span></div> <div class="metric-item svelte-1baw31t"><span class="metric-label svelte-1baw31t">MASS</span> <span class="metric-num highlight svelte-1baw31t"> </span></div></div> <div class="metric-row svelte-1baw31t"><div class="metric-item svelte-1baw31t"><span class="metric-label svelte-1baw31t">FPS</span> <span class="metric-num accent svelte-1baw31t"> </span></div> <div class="metric-item svelte-1baw31t"><span class="metric-label svelte-1baw31t">BACKEND</span> <button> </button></div></div></div>'),Co=D('<div class="config-grid svelte-1baw31t"><div class="config-item svelte-1baw31t"><span class="cfg-label svelte-1baw31t">mu</span> <span class="cfg-value svelte-1baw31t"> </span></div> <div class="config-item svelte-1baw31t"><span class="cfg-label svelte-1baw31t">sigma</span> <span class="cfg-value svelte-1baw31t"> </span></div> <div class="config-item svelte-1baw31t"><span class="cfg-label svelte-1baw31t">R</span> <span class="cfg-value svelte-1baw31t"> </span></div> <div class="config-item svelte-1baw31t"><span class="cfg-label svelte-1baw31t">dt</span> <span class="cfg-value svelte-1baw31t"> </span></div></div>'),To=D('<button class="builtin-btn svelte-1baw31t"> </button>'),ko=D('<div class="builtin-grid svelte-1baw31t"></div>'),Ao=D('<img class="svelte-1baw31t"/>'),Io=D('<div class="preset-item svelte-1baw31t" draggable="true" role="button" tabindex="0"><div class="preset-thumbnail svelte-1baw31t"><!></div> <div class="preset-info svelte-1baw31t"><span class="preset-name svelte-1baw31t"> </span> <span class="preset-size svelte-1baw31t"> </span></div> <button class="delete-btn svelte-1baw31t">&#10005;</button></div>'),$o=D('<div class="empty-state svelte-1baw31t">No saved patterns</div>'),Do=D('<div class="patterns-header svelte-1baw31t"><button class="small-btn svelte-1baw31t">IMPORT</button> <button class="small-btn svelte-1baw31t">EXPORT</button></div> <div class="preset-list svelte-1baw31t"></div>',1),Po=D('<aside class="right-sidebar svelte-1baw31t"><!> <!> <!> <!> <!></aside>');function Lo(e,t){st(t,!1);const n=()=>V(ne,"$simulationStore",l),r=()=>V(Ca,"$formattedStep",l),i=()=>V(Ea,"$formattedTime",l),s=()=>V(Ma,"$formattedMass",l),a=()=>V(vr,"$presets",l),[l,o]=Rt(),c=H();function u(){const _=n().backend==="cpu"?"gpu":"cpu";xa(_)}function f(_){const S=Kn();if(!S)return;const A=Math.floor((S.getWidth()-_.region.width)/2),T=Math.floor((S.getHeight()-_.region.height)/2);S.placeRegion(_.region,A,T)}function v(_){ur(_.seed),G(`Loaded pattern: ${_.name}`,"info")}function h(_,S){_.stopPropagation(),yo(S)}function g(){Eo()}function w(){const _=document.createElement("input");_.type="file",_.accept=".json",_.onchange=async S=>{const A=S.target.files?.[0];if(!A)return;const T=await A.text();try{xo(T)}catch{}},_.click()}function p(_,S){_.dataTransfer.effectAllowed="copy",_.dataTransfer.setData("text/plain",S.id),La(S,_)}Ne(()=>n(),()=>{z(c,n().config.kernels[0])}),Cn(),nn();var y=Po(),R=m(y);_o(R,{});var C=b(R,2);Qe(C,{title:"METRICS",borderColor:"secondary",children:(_,S)=>{var A=Mo(),T=m(A),I=m(T),P=m(I),B=b(T,2),L=m(B),O=b(m(L),2),K=m(O),ae=b(L,2),fe=b(m(ae),2),De=m(fe),we=b(B,2),ye=m(we),We=b(m(ye),2),de=m(We),at=b(ye,2),He=b(m(at),2);let oe;He.__click=u;var Ve=m(He);W(Nt=>{Y(P,r()),Y(K,`${i()??""}s`),Y(De,s()),Y(de,(n(),$(()=>n().fps))),oe=xe(He,1,"backend-btn svelte-1baw31t",null,oe,{gpu:n().backend==="gpu"}),He.disabled=(n(),$(()=>!n().gpuAvailable)),Y(Ve,Nt)},[()=>(n(),$(()=>n().backend.toUpperCase()))]),k(_,A)},$$slots:{default:!0}});var x=b(C,2);Qe(x,{title:"KERNEL",borderColor:"primary",children:(_,S)=>{var A=Co(),T=m(A),I=b(m(T),2),P=m(I),B=b(T,2),L=b(m(B),2),O=m(L),K=b(B,2),ae=b(m(K),2),fe=m(ae),De=b(K,2),we=b(m(De),2),ye=m(we);W(()=>{Y(P,(d(c),$(()=>d(c)?.mu??"—"))),Y(O,(d(c),$(()=>d(c)?.sigma??"—"))),Y(fe,(n(),$(()=>n().config.kernel_radius))),Y(ye,(n(),$(()=>n().config.dt)))}),k(_,A)},$$slots:{default:!0}});var E=b(x,2);Qe(E,{title:"SEEDS",borderColor:"tertiary",children:(_,S)=>{var A=ko();Vt(A,5,()=>wo,gn,(T,I)=>{var P=To();P.__click=()=>v(d(I));var B=m(P);W(()=>{qe(P,"title",(d(I),$(()=>d(I).description))),Y(B,(d(I),$(()=>d(I).name)))}),k(T,P)}),k(_,A)},$$slots:{default:!0}});var M=b(E,2);Qe(M,{title:"SAVED",borderColor:"primary",class:"saved-box",children:(_,S)=>{var A=Do(),T=rt(A),I=m(T);I.__click=w;var P=b(I,2);P.__click=g;var B=b(T,2);Vt(B,5,a,L=>L.id,(L,O)=>{var K=Io();K.__click=()=>f(d(O)),K.__keydown=oe=>oe.key==="Enter"&&f(d(O));var ae=m(K),fe=m(ae);{var De=oe=>{var Ve=Ao();W(()=>{qe(Ve,"src",(d(O),$(()=>d(O).thumbnail))),qe(Ve,"alt",(d(O),$(()=>d(O).name)))}),k(oe,Ve)};ie(fe,oe=>{d(O),$(()=>d(O).thumbnail)&&oe(De)})}var we=b(ae,2),ye=m(we),We=m(ye),de=b(ye,2),at=m(de),He=b(we,2);He.__click=oe=>h(oe,d(O).id),W(()=>{Y(We,(d(O),$(()=>d(O).name))),Y(at,`${d(O),$(()=>d(O).region.width)??""}x${d(O),$(()=>d(O).region.height)??""}`)}),Wi("dragstart",K,oe=>p(oe,d(O))),k(L,K)},L=>{var O=$o();k(L,O)}),k(_,A)},$$slots:{default:!0}}),k(e,y),it(),o()}tn(["click","keydown"]);class Ro{canvas;ctx;offscreenCanvas;offscreenCtx;settings;grayscaleMap;thermalMap;viridisMap;themeMap;constructor(t,n){this.canvas=t;const r=t.getContext("2d");if(!r)throw new Error("Failed to get 2D context");this.ctx=r,this.offscreenCanvas=document.createElement("canvas");const i=this.offscreenCanvas.getContext("2d");if(!i)throw new Error("Failed to get offscreen 2D context");this.offscreenCtx=i,this.settings=n,this.grayscaleMap=this.buildGrayscaleMap(),this.thermalMap=this.buildThermalMap(),this.viridisMap=this.buildViridisMap(),this.themeMap=this.viridisMap}setThemeColors(t){this.themeMap=this.buildThemeMap(t)}updateSettings(t){this.settings={...this.settings,...t}}render(t,n,r){const{width:i,height:s,channels:a}=t;(this.offscreenCanvas.width!==i||this.offscreenCanvas.height!==s)&&(this.offscreenCanvas.width=i,this.offscreenCanvas.height=s);const l=this.getColorMap(),o=this.offscreenCtx.createImageData(i,s),c=a[0];for(let u=0;u<c.length;u++){const f=Math.max(0,Math.min(1,c[u])),v=Math.floor(f*255)*4;o.data[u*4+0]=l[v+0],o.data[u*4+1]=l[v+1],o.data[u*4+2]=l[v+2],o.data[u*4+3]=255}this.offscreenCtx.putImageData(o,0,0),this.ctx.imageSmoothingEnabled=!1,this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.offscreenCanvas,0,0,i,s,0,0,this.canvas.width,this.canvas.height),this.settings.showGrid&&this.drawGrid(i,s),r&&this.drawGhostPreview(r,i,s),n&&this.settings.showSelection&&this.drawSelection(n,i,s)}drawGrid(t,n){const r=this.canvas.width/t,i=this.canvas.height/n;if(this.ctx.strokeStyle="rgba(255, 255, 255, 0.1)",this.ctx.lineWidth=1,r>=4&&i>=4){this.ctx.beginPath();for(let s=0;s<=t;s++){const a=s*r;this.ctx.moveTo(a,0),this.ctx.lineTo(a,this.canvas.height)}for(let s=0;s<=n;s++){const a=s*i;this.ctx.moveTo(0,a),this.ctx.lineTo(this.canvas.width,a)}this.ctx.stroke()}}drawSelection(t,n,r){const i=this.canvas.width/n,s=this.canvas.height/r,a=Math.min(t.startX,t.endX)*i,l=Math.min(t.startY,t.endY)*s,o=Math.abs(t.endX-t.startX)*i,c=Math.abs(t.endY-t.startY)*s;this.ctx.fillStyle="rgba(79, 195, 247, 0.2)",this.ctx.fillRect(a,l,o,c),this.ctx.strokeStyle="#4fc3f7",this.ctx.lineWidth=2,this.ctx.setLineDash([5,5]),this.ctx.strokeRect(a,l,o,c),this.ctx.setLineDash([]);const u=Math.abs(t.endX-t.startX),f=Math.abs(t.endY-t.startY);u>0&&f>0&&(this.ctx.fillStyle="#4fc3f7",this.ctx.font="12px monospace",this.ctx.fillText(`${u} x ${f}`,a+4,l-4))}drawGhostPreview(t,n,r){const i=this.canvas.width/n,s=this.canvas.height/r,{region:a,x:l,y:o}=t,c=document.createElement("canvas");c.width=a.width,c.height=a.height;const u=c.getContext("2d"),f=u.createImageData(a.width,a.height),v=this.getColorMap();for(let h=0;h<a.channels[0].length;h++){const g=Math.max(0,Math.min(1,a.channels[0][h])),w=Math.floor(g*255)*4;f.data[h*4+0]=v[w+0],f.data[h*4+1]=v[w+1],f.data[h*4+2]=v[w+2],f.data[h*4+3]=g>.01?180:0}u.putImageData(f,0,0),this.ctx.globalAlpha=.7,this.ctx.drawImage(c,0,0,a.width,a.height,l*i,o*s,a.width*i,a.height*s),this.ctx.globalAlpha=1,this.ctx.strokeStyle="#4fc3f7",this.ctx.lineWidth=2,this.ctx.setLineDash([3,3]),this.ctx.strokeRect(l*i,o*s,a.width*i,a.height*s),this.ctx.setLineDash([])}canvasToSim(t,n,r,i){const s=this.canvas.getBoundingClientRect(),a=r/this.canvas.width,l=i/this.canvas.height;return{x:Math.floor((t-s.left)*a),y:Math.floor((n-s.top)*l)}}getColorMap(){switch(this.settings.colorScheme){case"thermal":return this.thermalMap;case"viridis":return this.viridisMap;case"theme":return this.themeMap;default:return this.grayscaleMap}}buildGrayscaleMap(){const t=new Uint8ClampedArray(1024);for(let n=0;n<256;n++)t[n*4+0]=n,t[n*4+1]=n,t[n*4+2]=n,t[n*4+3]=255;return t}buildThermalMap(){const t=new Uint8ClampedArray(1024);for(let n=0;n<256;n++){const r=n/255;let i,s,a;if(r<.2){const l=r/.2;i=0,s=0,a=Math.floor(l*128)}else if(r<.4){const l=(r-.2)/.2;i=0,s=Math.floor(l*255),a=128+Math.floor(l*127)}else if(r<.6){const l=(r-.4)/.2;i=Math.floor(l*255),s=255,a=255-Math.floor(l*255)}else if(r<.8){const l=(r-.6)/.2;i=255,s=255-Math.floor(l*255),a=0}else{const l=(r-.8)/.2;i=255,s=Math.floor(l*255),a=Math.floor(l*255)}t[n*4+0]=i,t[n*4+1]=s,t[n*4+2]=a,t[n*4+3]=255}return t}buildViridisMap(){const t=[[68,1,84],[72,35,116],[64,67,135],[52,94,141],[41,120,142],[32,144,140],[34,167,132],[68,190,112],[121,209,81],[189,222,38],[253,231,36]],n=new Uint8ClampedArray(256*4);for(let r=0;r<256;r++){const s=r/255*(t.length-1),a=Math.floor(s),l=Math.min(a+1,t.length-1),o=s-a;n[r*4+0]=Math.floor(t[a][0]+o*(t[l][0]-t[a][0])),n[r*4+1]=Math.floor(t[a][1]+o*(t[l][1]-t[a][1])),n[r*4+2]=Math.floor(t[a][2]+o*(t[l][2]-t[a][2])),n[r*4+3]=255}return n}getCanvas(){return this.canvas}buildThemeMap(t){const n=o=>{const c=o.replace("#","");return[parseInt(c.slice(0,2),16),parseInt(c.slice(2,4),16),parseInt(c.slice(4,6),16)]},r=n(t.primary),i=n(t.secondary),s=n(t.tertiary),a=[{t:0,color:[5,5,5]},{t:.15,color:[r[0]*.3,r[1]*.3,r[2]*.3]},{t:.35,color:r},{t:.6,color:i},{t:.85,color:s},{t:1,color:[255,255,255]}],l=new Uint8ClampedArray(256*4);for(let o=0;o<256;o++){const c=o/255;let u=a[0],f=a[1];for(let h=1;h<a.length;h++)if(c<=a[h].t){u=a[h-1],f=a[h];break}const v=(c-u.t)/(f.t-u.t);l[o*4+0]=Math.floor(u.color[0]+v*(f.color[0]-u.color[0])),l[o*4+1]=Math.floor(u.color[1]+v*(f.color[1]-u.color[1])),l[o*4+2]=Math.floor(u.color[2]+v*(f.color[2]-u.color[2])),l[o*4+3]=255}return l}}class Oo{canvas;simulation;callbacks;mode="view";selection=null;isSelecting=!1;isDrawing=!1;isDragging=!1;draggedCreature=null;ghostPreview=null;brushSize=3;brushIntensity=.5;constructor(t,n,r,i={}){this.canvas=t,this.simulation=n,this.callbacks=i,this.setupEventListeners(),this.setupDragDrop()}setMode(t){switch(this.mode=t,this.selection=null,this.isSelecting=!1,this.isDrawing=!1,t){case"select":this.canvas.style.cursor="crosshair";break;case"draw":this.canvas.style.cursor="cell";break;case"erase":this.canvas.style.cursor="not-allowed";break;default:this.canvas.style.cursor="default"}this.callbacks.onModeChange?.(t)}getMode(){return this.mode}getSelection(){return this.selection}clearSelection(){this.selection=null,this.callbacks.onSelectionChange?.(null)}setBrushSize(t){this.brushSize=Math.max(1,Math.min(20,t))}setBrushIntensity(t){this.brushIntensity=Math.max(0,Math.min(1,t))}getGhostPreview(){return this.ghostPreview}startDragFromLibrary(t,n){this.isDragging=!0,this.draggedCreature={preset:t,offsetX:t.region.width/2,offsetY:t.region.height/2};const r=this.getSimCoords(n);this.ghostPreview={region:t.region,x:r.x-this.draggedCreature.offsetX,y:r.y-this.draggedCreature.offsetY}}setupEventListeners(){this.canvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.canvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.canvas.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.canvas.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this))}setupDragDrop(){this.canvas.addEventListener("dragover",t=>{if(t.preventDefault(),t.dataTransfer.dropEffect="copy",this.draggedCreature){const n=this.getSimCoords(t);this.ghostPreview={region:this.draggedCreature.preset.region,x:n.x-this.draggedCreature.offsetX,y:n.y-this.draggedCreature.offsetY}}}),this.canvas.addEventListener("drop",t=>{if(t.preventDefault(),this.draggedCreature){const n=this.getSimCoords(t),r=Math.floor(n.x-this.draggedCreature.offsetX),i=Math.floor(n.y-this.draggedCreature.offsetY);this.callbacks.onDrop?.(this.draggedCreature.preset,r,i),this.draggedCreature=null,this.ghostPreview=null,this.isDragging=!1}}),this.canvas.addEventListener("dragleave",()=>{this.ghostPreview=null})}handleMouseDown(t){const n=this.getSimCoords(t);switch(this.mode){case"select":this.isSelecting=!0,this.selection={startX:n.x,startY:n.y,endX:n.x,endY:n.y},this.callbacks.onSelectionChange?.(this.selection);break;case"draw":this.isDrawing=!0,this.callbacks.onDraw?.(n.x,n.y);break;case"erase":this.isDrawing=!0,this.callbacks.onErase?.(n.x,n.y);break}}handleMouseMove(t){const n=this.getSimCoords(t);this.isSelecting&&this.selection&&(this.selection.endX=n.x,this.selection.endY=n.y,this.callbacks.onSelectionChange?.(this.selection)),this.isDrawing&&(this.mode==="draw"?this.callbacks.onDraw?.(n.x,n.y):this.mode==="erase"&&this.callbacks.onErase?.(n.x,n.y)),this.isDragging&&this.draggedCreature&&(this.ghostPreview={region:this.draggedCreature.preset.region,x:n.x-this.draggedCreature.offsetX,y:n.y-this.draggedCreature.offsetY})}handleMouseUp(t){if(this.isSelecting&&this.selection){const n={startX:Math.min(this.selection.startX,this.selection.endX),startY:Math.min(this.selection.startY,this.selection.endY),endX:Math.max(this.selection.startX,this.selection.endX),endY:Math.max(this.selection.startY,this.selection.endY)};n.endX>n.startX&&n.endY>n.startY?(this.selection=n,this.callbacks.onSelectionComplete?.(n)):this.selection=null,this.callbacks.onSelectionChange?.(this.selection)}this.isSelecting=!1,this.isDrawing=!1}handleMouseLeave(t){this.isSelecting&&(this.isSelecting=!1,this.selection=null,this.callbacks.onSelectionChange?.(null)),this.isDrawing=!1,this.ghostPreview=null}handleKeyDown(t){const n=t.target;n.tagName==="INPUT"||n.tagName==="TEXTAREA"||(t.key==="v"||t.key==="Escape"?this.setMode("view"):t.key==="s"?this.setMode("select"):t.key==="d"?this.setMode("draw"):t.key==="e"&&this.setMode("erase"),t.key==="["?(this.setBrushSize(this.brushSize-1),this.callbacks.onBrushSizeChange?.(this.brushSize)):t.key==="]"&&(this.setBrushSize(this.brushSize+1),this.callbacks.onBrushSizeChange?.(this.brushSize)))}getSimCoords(t){const n=this.canvas.getBoundingClientRect(),r=t.clientX-n.left,i=t.clientY-n.top,s=this.simulation.getWidth(),a=this.simulation.getHeight();return{x:Math.floor(r/n.width*s),y:Math.floor(i/n.height*a)}}getBrushSize(){return this.brushSize}getBrushIntensity(){return this.brushIntensity}}var No=D('<div class="simulation-view svelte-145nxqv"><div class="canvas-frame svelte-145nxqv"><div class="canvas-header svelte-145nxqv"><span class="dim-label svelte-145nxqv"> </span></div> <div class="canvas-container svelte-145nxqv"><canvas class="svelte-145nxqv"></canvas> <div class="corner-marker top-left svelte-145nxqv"></div> <div class="corner-marker top-right svelte-145nxqv"></div> <div class="corner-marker bottom-left svelte-145nxqv"></div> <div class="corner-marker bottom-right svelte-145nxqv"></div> <div class="canvas-scanlines svelte-145nxqv"></div></div></div></div>');function Fo(e,t){st(t,!1);const n=()=>V(Ot,"$settings",a),r=()=>V(ne,"$simulationStore",a),i=()=>V(An,"$currentScheme",a),s=()=>V(ks,"$renderTrigger",a),[a,l]=Rt();let o=H(),c=H(),u=H(null),f=H(null);const v=512;kn(()=>{const E=Kn();!E||!d(c)||(Qn.set(d(c)),z(u,new Ro(d(c),{colorScheme:n().colorScheme,showGrid:n().showGrid,showSelection:n().showSelection,brushSize:n().brushSize,brushIntensity:n().brushIntensity,backend:r().backend})),z(f,new Oo(d(c),E,d(u),{onSelectionChange:()=>h(),onSelectionComplete:()=>{},onDrop:(M,_,S)=>{E.placeRegion(M.region,_,S),h()},onDraw:(M,_)=>{E.drawAt(M,_,n().brushSize,n().brushIntensity),h()},onErase:(M,_)=>{E.eraseAt(M,_,n().brushSize),h()},onModeChange:()=>{},onBrushSizeChange:()=>{}})),Zn.set(d(f)),h())}),xs(()=>{Zn.set(null),Qn.set(null),z(u,null),z(f,null)});function h(){if(!d(u))return;const E=Kn();if(!E)return;const M=E.getState(),_=d(f)?.getSelection(),S=d(f)?.getGhostPreview();d(u).render(M,_,S)}Ne(()=>(r(),d(u)),()=>{r().state&&d(u)&&h()}),Ne(()=>(d(f),n()),()=>{d(f)&&n().mode&&d(f).setMode(n().mode)}),Ne(()=>(d(f),n()),()=>{d(f)&&(d(f).setBrushSize(n().brushSize),d(f).setBrushIntensity(n().brushIntensity))}),Ne(()=>(d(u),n()),()=>{d(u)&&n().colorScheme&&(d(u).updateSettings({colorScheme:n().colorScheme}),h())}),Ne(()=>(d(u),i()),()=>{d(u)&&i()&&(d(u).setThemeColors({primary:i().colors.primary,secondary:i().colors.secondary,tertiary:i().colors.tertiary}),h())}),Ne(()=>(s(),d(u)),()=>{s()&&d(u)&&h()}),Cn(),nn();var g=No(),w=m(g),p=m(w),y=m(p),R=m(y),C=b(p,2),x=m(C);qe(x,"width",v),qe(x,"height",v),Kt(x,E=>z(c,E),()=>d(c)),Kt(C,E=>z(o,E),()=>d(o)),W(()=>Y(R,`${r(),$(()=>r().config.width)??""}x${r(),$(()=>r().config.height)??""}`)),k(e,g),it(),l()}var zo=D('<div class="loading-screen svelte-1n46o8q"><div class="loading-content svelte-1n46o8q"><div class="glitch-text svelte-1n46o8q" data-text="FLOW_LENIA">FLOW_LENIA</div> <div class="loading-status svelte-1n46o8q"><span class="animate-pulse">INITIALIZING SUBSTRATE</span> <span class="animate-blink">_</span></div></div></div>'),Bo=D('<div class="error-screen svelte-1n46o8q"><div class="error-content svelte-1n46o8q"><div class="error-title svelte-1n46o8q">SYSTEM FAILURE</div> <div class="error-message svelte-1n46o8q"> </div> <div class="error-hint svelte-1n46o8q">Ensure WASM is built: <code class="svelte-1n46o8q">wasm-pack build --target web --release</code></div></div></div>'),Go=D('<div class="scanlines"></div>'),Uo=D('<div class="app-container svelte-1n46o8q"><canvas class="glow-layer svelte-1n46o8q"></canvas> <!> <div class="main-content svelte-1n46o8q"><!> <!> <!></div> <!></div> <!> <div class="vignette"></div>',1);function qo(e,t){st(t,!1);const n=()=>V(Qn,"$simulationCanvas",a),r=()=>V(An,"$currentScheme",a),i=()=>V(ne,"$simulationStore",a),s=()=>V(Ot,"$settings",a),[a,l]=Rt();let o=H(!1),c=H(null),u=H(),f=H(null),v,h=H(!1),g=H(),w=null,p=null;function y(){const M=n();if(!M||!d(f)||!d(u)){v=requestAnimationFrame(y);return}if(w||(w=document.createElement("canvas"),p=w.getContext("2d",{willReadFrequently:!0})),d(g)){const L=d(g).getBoundingClientRect(),O=d(u).width!==L.width||d(u).height!==L.height,K=w.width===0||w.height===0;(O||K)&&(Re(u,d(u).width=L.width),Re(u,d(u).height=L.height),w.width=L.width,w.height=L.height)}if(!p||w.width===0)return;const _=d(u).width,S=d(u).height,A=r().colors;p.drawImage(M,0,0,_,S);const T=p.getImageData(0,0,_,S),I=T.data,P=5,B=255-P;for(let L=0;L<I.length;L+=4){const O=(I[L]+I[L+1]+I[L+2])/3,ae=Math.max(0,O-P)/B,fe=Math.pow(ae,.35);I[L]=255,I[L+1]=255,I[L+2]=255,I[L+3]=fe*255}p.putImageData(T,0,0),d(f).clearRect(0,0,_,S),Re(f,d(f).fillStyle=A.primary),d(f).fillRect(180,0,80,S),Re(f,d(f).fillStyle=A.secondary),d(f).fillRect(_-220,0,80,S),Re(f,d(f).fillStyle=A.tertiary),d(f).fillRect(0,30,_,40),Re(f,d(f).fillStyle=A.tertiary),d(f).fillRect(0,S-60,_,40),Re(f,d(f).globalCompositeOperation="destination-in"),d(f).drawImage(w,0,0),Re(f,d(f).globalCompositeOperation="source-over"),v=requestAnimationFrame(y)}kn(async()=>{Da(),G("SYS.BOOT","info"),G("Loading WASM module...","info");try{await wa(),z(o,!0),G("WASM initialized","success"),G(`Backend: ${i().backend.toUpperCase()}`,"info"),G(`Theme: ${r().name}`,"info"),i().gpuAvailable?G("WebGPU available","success"):G("WebGPU not available","warn"),G("SYSTEM READY","success")}catch(M){z(c,String(M)),G(`INIT FAILED: ${M}`,"error")}}),xs(()=>{v&&cancelAnimationFrame(v)}),Ne(()=>(d(u),d(h)),()=>{d(u)&&!d(h)&&(z(f,d(u).getContext("2d")),z(h,!0),y())}),Cn(),nn();var R=jn(),C=rt(R);{var x=M=>{var _=zo();k(M,_)},E=M=>{var _=jn(),S=rt(_);{var A=I=>{var P=Bo(),B=m(P),L=b(m(B),2),O=m(L);W(()=>Y(O,d(c))),k(I,P)},T=I=>{var P=Uo(),B=rt(P),L=m(B);Kt(L,de=>z(u,de),()=>d(u));var O=b(L,2);Na(O,{});var K=b(O,2),ae=m(K);to(ae,{});var fe=b(ae,2);Fo(fe,{});var De=b(fe,2);Lo(De,{});var we=b(K,2);za(we),Kt(B,de=>z(g,de),()=>d(g));var ye=b(B,2);{var We=de=>{var at=Go();k(de,at)};ie(ye,de=>{s(),$(()=>s().showScanlines)&&de(We)})}k(I,P)};ie(S,I=>{d(c)?I(A):I(T,!1)},!0)}k(M,_)};ie(C,M=>{!d(o)&&!d(c)?M(x):M(E,!1)})}k(e,R),it(),l()}Hi(qo,{target:document.getElementById("app")});
